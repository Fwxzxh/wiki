<!DOCTYPE html><html lang="es"><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="UTF-8"><meta name="viewport" content="user-scalable=yes, width=device-width, initial-scale=1, maximum-scale=5"><meta name="theme-color" content="#1976d2"><meta name="msapplication-TileColor" content="#1976d2"><meta name="msapplication-TileImage" content="/_assets/favicons/mstile-150x150.png"><title>Edit Guia Csharp | fwxzxh wiki</title><meta name="description" content=""><meta property="og:title" content="Edit Guia Csharp"><meta property="og:type" content="website"><meta property="og:description" content=""><meta property="og:image"><meta property="og:url" content="http://wiki.fwxzxh.dev/e/es/Lenguajes/Csharp/Csharp"><meta property="og:site_name" content="fwxzxh wiki"><link rel="apple-touch-icon" sizes="180x180" href="/_assets/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="192x192" href="/_assets/favicons/android-chrome-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/_assets/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/_assets/favicons/favicon-16x16.png"><link rel="mask-icon" href="/_assets/favicons/safari-pinned-tab.svg" color="#1976d2"><link rel="manifest" href="/_assets/manifest.json"><script>var siteConfig = {"title":"fwxzxh wiki","theme":"default","darkMode":true,"tocPosition":"right","lang":"es","rtl":false,"company":"fwxzxh","contentLicense":"alr","logoUrl":"/logo.png"}
var siteLangs = []
</script><link type="text/css" rel="stylesheet" href="https://use.fontawesome.com/releases/v5.10.0/css/all.css"><link type="text/css" rel="stylesheet" href="/_assets/css/app.9c9c450cb14e3018d1b1.css"><script type="text/javascript" src="/_assets/js/runtime.js?1671844980"></script><script type="text/javascript" src="/_assets/js/app.js?1671844980"></script></head><body><div id="root"><editor :page-id="29" locale="es" path="Lenguajes/Csharp/Csharp" title="Guia Csharp" description="" :tags="[&quot;c#&quot;,&quot;oop&quot;]" :is-published="true" publish-start-date="" publish-end-date="" script-css="" script-js="" init-mode="update" init-editor="markdown" init-content="IyBDb25jZXB0b3MgQsOhc2ljb3MKCiMjIEMjCgotIFVuIGVsZWdhbnRlIGxlbmd1YWplIG9yaWVudGFkbyBvYmpldG9zLgotIENvcnJlIHNvYnJlIGVsIC5ORVQgRnJhbWV3b3JrLgoKIyMgLk5FVCBGcmFtZXdvcmsKCi0gQ29uc2lzdGUgZW46CiAgLSBgQ0xSIChDb21tb24gTGFuZ3VhZ2UgUnVudGltZSlgCiAgICAtIEVzIGxhIGZ1bmRhY2nDs24gZGUgLk5FVC4KICAgIC0gTWFuZWphIG11Y2hhcyBjb3Nhcy4KICAgICAgLSBDw7NkaWdvIGVuIHRpZW1wbyBkZSBlamVjdWNpw7NuLgogICAgICAtIE1hbmVqbyBkZSBtZW1vcmlhLgogICAgICAtIEV0Yy4KICAtIGAuTkVUIEZyYW1ld29yayBDbGFzcyBMaWJyYXJ5YC4KICAgIC0gQ29sZWNjacOzbiBkZSBjbGFzZXMsIGludGVyZmFjZXMgeSBUaXBvcyBkZSBkYXRvcyBxdWUgdGUgcGVybWl0ZW4KICAgICAgaGFjZXIgVW4gcmFuZ28gZGUgdGFyZWFzIGRlIHByb2dyYW1hY2nDs24gY29tdW5lcy4KICAgIC0gQyMgTGEgVXNhIGV4dGVuc2l2YW1lbnRlLgoKIyMgVmFyaWFibGVzCgotIFJlc2VydmFuIGluZm9ybWFjacOzbiBlbiBtZW1vcmlhLgotIERlYmVuIHRlbmVyIG5vbWJyZXMgZGVzY3JpcHRpdm9zLgotIFRhbWJpw6luIHNvbiBsbGFtYWRhcyBpZGVudGlmaWNhZG9yZXMuCgojIyBUaXBvcyBkZSB2YXJpYWJsZXMKCi0gRGVmaW5lIGVsIHRpcG8gZGUgdmFsb3IgcXVlIHZhIGEgc2VyIGd1YXJkYWRvIGVuIGxhIHZhcmlhYmxlIGFzaSBjb21vCiAgbGEgbWVtb3JpYSBxdWUgc2UgbmVjZXNpdGEuCgpgYGAgY3NoYXJwCmludCBteUFnZTsKYGBgCgo+IFVuYSBsaW5lYSBkZSBjw7NkaWdvIHF1ZSBjb21wbGV0YSB1bmEgYWNjacOzbiBlcyBsbGFtYWRhIGRlY2xhcmFjacOzbiB5Cj4gdGVybWluYW4gY29uIHB1bnRvIHkgY29tYS4KCi0gUG9kZW1vcyBhc2lnbmFybGUgdW4gdmFsb3IgYSBsYSB2YXJpYWJsZSBjdWFuZG8gbGEgZGVjbGFyYXMuCgpgYGAgY3NoYXJwCmludCBteUFnZSA9IDE4OwpgYGAKCiMjIFRpcG9zIGRlIGRhdG9zCgotIEhheSBhbGd1bm9zIHRpcG9zIGRlIGRhdG9zIHBvciBkZWZlY3RvIGVuIEMjLgogIGBpbnRgICAKICBFbnRlcm8uCgogIGBmbG9hdGAgIAogIE7Dum1lcm9zIGRlIGNvbWEgZmxvdGFudGUgKENvbiBkZWNpbWFsZXMgcHVlcy4pLgoKICBgZG91YmxlYCAgCiAgVW5hIHZlcnNpw7NuIGNvbiBtw6FzIHByZWNpc2nDs24gKG3DoXMgZMOtZ2l0b3MpIGRlIGZsb2F0LgoKICBgY2hhcmAgIAogIFVuIGNhcsOhY3Rlci4KCiAgYGJvb2xgICAKICBgdHJ1ZWAgbyBgZmFsc2VgLgoKICBgc3RyaW5nYCAgCiAgQ2FkZW5hcyBkZSBjYXJhY3RlcmVzLgoKPiB2YWxvcmVzIGBjaGFyYCBzb24gZGVmaW5pZG9zIGNvbiBjb21pbGxhcyBzaW1wbGVzIHkgYHN0cmluZ2AgY29uCj4gY29taWxsYXMgZG9ibGVzLgoKIyMgTWkgcHJpbWVyIHByb2dyYW1hIGVuIEMjCgotIENhZGEgYXBsaWNhY2nDs24gZGUgY29uc29sYSBlbiBDIyBkZWJlIHRlbmVyIHVuYSBmdW5jacOzbiBsbGFtYWRhIGBNYWluYAogIC0gRXN0YSBmdW5jacOzbiBlcyBlbCBwdW50byBkZSBlbnRyYWRhIHBhcmEgY2FkYSBhcGxpY2FjacOzbi4KCiMjIE1vc3RyYW5kbyB0ZXh0bwoKLSBMYSBtYXlvcsOtYSBkZSBsYXMgYXBsaWNhY2lvbmVzIG5lY2VzaXRhbiBhbGfDum4gdGlwbyBkZSBgaW5wdXRgIHkgbm9zCiAgdGFuIGFsZ8O6biB0aXBvIGRlIGBvdXRwdXRgLgotIFBhcmEgbW9zdHJhciB0ZXh0byBlbiBwYW50YWxsYSB1c2Ftb3MgYENvbnNvbGUud3JpdGUoKWAgbwogIGBDb25zb2xlLldyaXRlTGluZSgpYC4KICAtIExhIGRpZmVyZW5jaWEgZXMgcXVlIGNvbiBlbCBzZWd1bmRvIGFsIGZpbmFsIGRlbCB0ZXh0byBkYSB1biBzYWx0bwogICAgZGUgbGluZWEuCgpgYGAgY3NoYXJwCkNvbnNvbGUuV3JpdGVMaW5lKCJIb2xhIE11bmRvISIpOwpgYGAKCi0gUGFyYSBpbXByaW1pciB1bmEgY2FkZW5hIGNvbiB1biBmb3JtYXRvIGVzcGVjaWZpY28gcG9kZW1vcyBoYWNlci4KCmBgYCBjc2hhcnAKaW50IHggPSAxMDsKZG91YmxlIHkgPSAyMDsKCkNvbnNvbGUuV3JpdGVMaW5lKCJ4ID0gezB9OyB5ID0gezF9IiwgeCwgeSk7CmBgYAoKPiBgezB9YCBzZXJhIHJlbXBsYXphZG8gcG9yIGVsIHZhbG9yIGRlIGB4YCB5IGB7MX1gIHBvciBlbCB2YWxvciBkZSBgeWAuCgojIyBMZXllbmRvIHRleHRvCgotIFBvZGVtb3MgbGVlciB0ZXh0byBkZSBsYSB0ZXJtaW5hbCBjb24gYENvbnNvbGUuUmVhZExpbmUoKWAgeSBhc2lnbmFybG8KICBhIHVuYSB2YXJpYWJsZS4KCmBgYCBjc2hhcnAKeW91cklucHV0ID0gQ29uc29sZS5SZWFkTGluZSgpOwpgYGAKCj4gRXN0byBzaWVtcHJlIHJldG9ybmEgdW4gYHN0cmluZ2AuCgotIFBvZGVtb3MgQ29udmVydGlyIGVzdGUgYHN0cmluZ2AgZW4gb3RybyB0aXBvIGRlIGRhdG8gZsOhY2lsbWVudGUgY29uIGVsCiAgbcOpdG9kbyBgQ29udmVydC5Ub1hYWGAuCiAgLSBFSi4gYENvbnZlcnQuVG9Eb3VibGVgIG8gYENvbnZlcnQuVG9Cb29sZWFuYC4KICAgIC0gVGFtYmnDqW4gcG9kZW1vcyBjb252ZXJ0aXIgYSBlbnRlcm9zIGRlIHVuIHRhbWHDsW8gZW4gZXNwZWNpZmljbwogICAgICBgQ29udmVydC5Ub0ludDE2YCwgYENvbnZlcnQuVG9JbnQzMmAsIGV0Yy4KICAgICAgLSBFbCB0aXBvIGRlIGRhdG8gcG9yIGRlZmVjdG8gZW4gZW50ZXJvcyBlcyBgSW50MzJgLgoKIyMgQ29tZW50YXJpb3MKCi0gRW1waWV6YW4gY29uIGAvL2AuCi0gQ29tZW50YXJpb3MgbXVsdGlsaW5lYSBzb24gYC8qIHRleHRvICovYC4KCiMjIExhIHBhbGFicmEgYHZhcmAKCi0gQyMgcHJvdmVlIHVuYSBmb3JtYSBkZSBkZWNsYXJhciB2YXJpYWJsZXMgeSBoYWNlciBxdWUgZWwgY29tcGlsYWRvcgogIGRldGVybWluZSBlbCB0aXBvIGRlIGRhdG8gZGUgZXN0YS4KCmBgYCBjc2hhcnAKdmFyIG51bSA9IDE1OwpgYGAKCi0gRXN0YXMgdmFyaWFibGVzIHNvbiBsbGFtYWRhcyBkZSAqKlRpcG8gaW1wbMOtY2l0byoqLgotIEVzdGFzIHZhcmlhYmxlcyAqKmRlYmVuKiogc2VyIGluaWNpYWxpemFkYXMgY29uIHVuIHZhbG9yLgoKYGBgIGNzaGFycAovLyBFc3RvIGRhcsOhIHVuIGVycm9yIQp2YXIgbnVtOwpudW0gPSAxNTsKYGBgCgo+IEVzIGJ1ZW5hIHByw6FjdGljYSBkZWNsYXJhciB0dXMgdmFyaWFibGVzIGNvbiBzdSB0aXBvIGRlIGRhdG8geSB1c2FyCj4gYHZhcmAgc29sbyBwYXJhIGNhc29zIGVzcGVjaWFsZXMuCgojIyBDb25zdGFudGVzCgotIFNlIGRlZmluZW4gY29uc3RhbnRlcyBjb24gbGEgcGFsYWJyYSBgY29uc3RgLgoKYGBgIGNzaGFycAovL0VqZW1wbG8KY29uc3QgZG91YmxlIFBJID0gMy4xNDsKYGBgCgotIExhcyBjb25zdGFudGVzIHNpZW1wcmUgZGViZW4gc2Ugc2VyIGluaWNpYWxpemFkYXMgYXNpZ27DoW5kb2xlcyB1bgogIHZhbG9yLgotIFNvbiB2YXJpYWJsZXMgcXVlIG5vIHB1ZWRlbiBzZXIgY2FtYmlhZGFzLgoKIyMgT3BlcmFkb3JlcyBBcml0bcOpdGljb3MKCi0gU29uIGxvcyBtaXNtb3MgZGUgdG9kYSBsYSB2aWRhIGArLCAtLCAqLCAvLCAlYC4KLSBUaWVuZW4gdW5hIGplcmFycXXDrWEgZGUgZXZhbHVhY2nDs24gbm9ybWFsIHkgZXN0YSBwdWVkZSBhZmVjdGFyc2UgY29uCiAgbG9zIHBhcsOpbnRlc2lzLgoKIyMgT3BlcmFkb3JlcyBkZSBhc2lnbmFjacOzbiBlIGluY3JlbWVudG8KCiAgICB4ICs9IDI7IC8vIGVxdWl2YWxlbnRlIGEgeCA9IHggKyAyOwogICAgeCAlPSAyOyAvLyBlcXVpdmFsZW50ZSBhIHggPSB4ICUgMjsKICAgIC8vIHkgZGUgbGEgbWlzbWEgbWFuZXJhIGNvbiBsb3Mgb3BlcmFkb3JlcyBhbnRlcmlvcmVzLgoKIyMjIE9wZXJhZG9yZXMgZGUgaW5jcmVtZW50bwoKLSBQb2RlbW9zIGluY3JlbWVudGFyIHVuIHZhbG9yIGEgdW5hIHZhcmlhYmxlIGNhZGEgcXVlIG51ZXN0cm8gcHJvZ3JhbWEKICBwYXNlIHBvciBhbGzDrS4KICAtIEVzIGVzcGVjaWFsbWVudGUgw7p0aWwgZW4gY2ljbG9zLgoKYGBgIGNzaGFycAp4Kys7IC8vIGVxdWl2YWxlbnRlIGEgeCA9IHggKyAxOwpgYGAKCiMjIyBGb3JtYXMgZGUgcHJlZmlqbyB5IHBvc3RmaWpvCgotIEVsIG9wZXJhZG9yIGRlIGluY3JlbWVudG8gdGllbmUgZG9zIGZvcm1hcy4KCmBgYCBjc2hhcnAKKyt4OyAvLyBwcmVmaWpvCngrKzsgLy8gcG9zdGZpam8KYGBgCgotIFByZWZpam86IEluY3JlbWVudGEgZWwgdmFsb3IgeSBkZXNwdcOpcyBwcm9jZWRlIGNvbiBsYSBleHByZXNpw7NuLgotIFBvc3RmaWpvOiBFdmFsw7phIGxhIGV4cHJlc2nDs24geSBkZXNwdcOpcyBpbmNyZW1lbnRhIGVsIHZhbG9yLgoKYGBgIGNzaGFycAppbnQgeCA9IDM7CmludCB5ID0gKyt4OwovLyB4IGVzIDQsIHkgZXMgNApgYGAKCmBgYCBjc2hhcnAKaW50IHggPSAzOwppbnQgeSA9IHgrKzsKLy8geCBlcyA0LCB5IGVzIDMKYGBgCgo+IEVzdG8gdGFtYmnDqW4gZnVuY2lvbmEgY29uIGVsIG9wZXJhZG9yIGRlIGRlY3JlbWVudG8gYC1gLCBzaWVuZG8geOKAkyB5Cj4g4oCTeC4KCiMgQ29uZGljaW9uYWxlcyB5IGxvb3BzCgojIyBgaWYgZWxzZWAKCi0gRWplY3V0YSB1biBibG9xdWUgZGUgY8OzZGlnbyBzaSB1bmEgY29uZGljacOzbiBzZSBjdW1wbGUuCgpgYGAgY3NoYXJwCmlmICh4ID4geSkKICAgIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgieCBlcyBtw6FzIGdyYW5kZSBxdWUgeSIpOwogICAgfQpgYGAKCiMjIyBPcGVyYWRvcmVzIFJlbGFjaW9uYWxlcwoKLSBTZSB1c2FuIHBhcmEgZXZhbHVhciBjb25kaWNpb25lcy4KLSBTb24gbG9zIG1pc21vcyBkZSBzaWVtcHJlOyAhPSwgXD49LCBcPD0sID09LgoKIyMjIE9wZXJhZG9yIGBlbHNlYAoKLSBTZSBlamVjdXRhIGN1YW5kbyBubyBzZSBjdW1wbGUgbGEgY29uZGljacOzbiBkZW50cm8gZGVsIGBpZmAuCgpgYGAgY3NoYXJwCmlmICh4ID4geSkKICAgIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgieCBlcyBtw6FzIGdyYW5kZSBxdWUgeSIpOwogICAgfQplbHNlCiAgICB7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoInkgZXMgbcOhcyBncmFuZGUgcXVlIHgiKTsKICAgIH0KYGBgCgotIFBvZGVtb3MgY29tYmluYXJsb3MgeSBhZ3J1cGFybG9zIGNvbW8gcXVlcmFtb3MKCmBgYCBjc2hhcnAKaWYgKCB4ICkKICAgIHsKICAgICAgICAvLyBhbGdvCiAgICB9CmVsc2UgaWYgKCB5ICkKICAgIHsKICAgICAgICAvLyBvdHJhIGNvc2EKICAgIH0KZWxzZSBpZiAoIHogKQogICAgewogICAgICAgIC8vYWFhYWFhCiAgICB9CmVsc2UKICAgIHsKICAgICAgICAvL2ZpbmFsCiAgICB9CmBgYAoKIyMgb3BlcmFkb3IgYHN3aXRjaGAKCi0gUHJvdmVlIHVuYSBtYW5lcmEgbcOhcyBlbGVnYW50ZSBkZSBjb21wYXJhciB1bmEgdmFyaWFibGUgY29uIGNpZXJ0b3MKICBjYXNvcyBwcmVkZWZpbmlkb3MuCi0gQ2FkYSBjYXNvIGVzIGxsYW1hZG8gYGNhc2VgLgoKYGBgIGNzaGFycAppbnQgbnVtID0gMzsKc3dpdGNoIChudW0pCiAgICB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZSgib25lIik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoInR3byIpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJUaHJlZSIpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiTm8gZXMgdW5vLCBkb3MgbyB0cmVzIik7CiAgICAgICAgICAgIGJyZWFrOwogICAgfQpgYGAKCj4gVW4gYHN3aXRjaGAgcHVlZGUgaW5jbHVpciBuIG7Dum1lcm8gZGUgY2Fzb3MsIHBlcm8gY2FkYSBjYXNvIGRlYmUgZGUKPiBzZXIgw7puaWNvLgoKPiBFbCBibG9xdWUgYGRlZmF1bHRgIHNvbG8gc2UgZWplY3V0YSBzaSBubyBzZSBjdW1wbGUgbmluZ3VubyBkZSBsb3MKPiBgY2FzZWAuCgojIyMgTGEgcGFsYWJyYSBgYnJlYWtgCgotIFNlIHVzYSBwYXJhIHJvbXBlciBlbCBjaWNsbyBkZSBlamVjdWNpw7NuIGRlbCBgc3dpdGNoYAogIC0gU2luIGVsLCBlbCBgc3dpdGNoYCBzZWd1aXLDoSBjb21wYXJhbmRvIGNvbiBvdHJvcyBjYXNlIGEgcGVzYXIgZGUKICAgIGVudHJhciBlbiB1bm8uCiAgLSBUYW1iacOpbiBzaXJ2ZSBwYXJhIHJvbXBlciBjaWNsb3MgYGZvcmAgbyBgd2hpbGVgLgogIC0gRW4gQyMgYGJyZWFrYCBlcyBvYmxpZ2F0b3JpbyBhbCBmaW5hbCBkZSBjYWRhIGBjYXNlYC4KCiMjIEVsIGNpY2xvIGB3aGlsZWAKCi0gRWplY3V0YSB1biBibG9xdWUgZGUgY8OzZGlnbyBzaWVtcHJlIHkgY3VhbmRvIHVuYSBjb25kaWNpw7NuIHNlIGN1bXBsYS4KCmBgYCBjc2hhcnAKaW50IG51bSA9IDE7CndoaWxlIChudW0gPCA2KQogICAgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKG51bSk7CiAgICAgICAgbnVtKys7CiAgICB9CmBgYAoKPiBFbCBjw7NkaWdvIGFudGVyaW9yIGltcHJpbWUgbG9zIG7Dum1lcm9zIGRlbCAxIGFsIDUuCgojIyBFbCBjaWNsbyBgZm9yYAoKLSBFamVjdXRhIHVuIGJsb3F1ZSBkZSBjw7NkaWdvIHVuIG7Dum1lcm8gZXNwZWNpZmljbyBkZSB2ZWNlcy4KCmBgYCBjc2hhcnAKZm9yIChpbml0OyBjb25kaXRpb247IGluY3JlbWVudCkKICAgIHsKICAgICAgICAvL2NvZGUKICAgIH0KYGBgCgoqKkVqZW1wbG86KioKCmBgYCBjc2hhcnAKZm9yIChpbnQgeCA9IDEwOyB4IDwgMTU7IHgrKykKICAgIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiVmFsdWUgb2YgeDogezB9IiwgeCk7CiAgICB9CmBgYAoKLSBFbiBlbCBibG9xdWUgZGVsIGluY3JlbWVudG8gcG9kZW1vcyBoYWNlciBvdHJhcyBjb3NhcyBjb21vIGluY3JlbWVudGFyCiAgZGUgMyBjb24gYHgrPTNgIG8gZGVjcmVtZW50YXIgZGUgbGEgbWlzbWEgbWFuZXJhIGVsIGNvbnRhZG9yLgotIFRhbWJpw6luIHBvZGVtb3MgcXVpdGFyIGVsIGJsb3F1ZSBgaW5pdGAgZSBgaW5jcmVtZW50YCBkZWwgYmxvcXVlLCBwZXJvCiAgbG9zIHB1bnRvcyB5IGNvbWFzIHNvbiBvYmxpZ2F0b3Jpb3MuCgpgYGAgY3NoYXJwCmludCB4ID0gMTA7CmZvciAoIDsgeCA+IDEwIDsgKQogICAgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKHgpOwogICAgICAgIHggLT0gMzsKICAgIH0KYGBgCgo+IGBmb3IgKDs7KXt9YCBlcyB1biBjaWNsbyBmb3IgaW5maW5pdG8uCgojIyBgZG8td2hpbGVgCgotIEVzIHNpbWlsYXIgYSB1biBjaWNsbyBgd2hpbGVgLCBzb2xvIHF1ZSBlbiBlc3RlIGVsIGJsb3F1ZSBkZSBjw7NkaWdvIGVzCiAgZWplY3V0YWRvIGFsIG1lbm9zIHVuYSB2ZXouCgpgYGAgY3NoYXJwCmludCBhID0gMDsKZG8gewogICAgQ29uc29sZS5Xcml0ZUxpbmUoYSk7CiAgICBhKys7Cn0gd2hpbGUgKGEgPCA1KTsKYGBgCgojIyBgYnJlYWtgIHkgYGNvbnRpbnVlYAoKLSBPdHJvIHVzbyBkZSBgYnJlYWtgIGVzIGVuIGNpY2xvcywgeWEgcXVlICJyb21wZSIgbGEgZWplY3VjacOzbiBkZQogIGVzdG9zLgoKYGBgIGNzaGFycAppbnQgbnVtID0gMDsKd2hpbGUgKG51bSA8IDIwKQogICAgewogICAgICAgIGlmIChudW0gPT0gNSkKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKG51bSk7CiAgICAgICAgbnVtKys7CiAgICB9CmBgYAoKPiBFbiBlbCBibG9xdWUgZGUgYW50ZXJpb3IsIGVsIGB3aGlsZWAgcGFyYXLDoSBjdWFuZG8gYG51bWAgc2VhIGlndWFsIGEKPiA1LgoKLSBMYSBwYWxhYnJhIGBjb250aW51ZWAgZXMgc2ltaWxhciBhbCBgYnJlYWtgLCBwZXJvIGVzdGUgc29sbyBzZSBzYWx0YQogIHVuYSBpdGVyYWNpw7NuIGRlbCBjaWNsby4KCmBgYCBjc2hhcnAKZm9yIChpbnQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7CiAgICBpZiAoaSA9PSA1KQogICAgICAgIGNvbnRpbnVlOwoKICAgIENvbnNvbGUuV3JpdGVMaW5lKGkpOwp9CmBgYAoKIyMgT3BlcmFkb3JlcyBsw7NnaWNvcwoKLSBTb24gdXNhZG9zIHBhcmEgdW5pciBtw7psdGlwbGVzIGV4cHJlc2lvbmVzIHkgcmV0b3JuYXIgYHRydWVgIG8KICBgZmFsc2VgLgotIHNvbiBgJiYsIHx8LCAhYCwgQU5ELCBPUiB5IE5PVCByZXNwZWN0aXZhbWVudGUuCgpgYGAgY3NoYXJwCmludCBhZ2UgPSA0MjsKZG91YmxlIG1vbmV5ID0gNTQwOwppZiAoYWdlID4gMTggJiYgbW9uZXkgPiAxMDApIHsKICAgIENvbnNvbGUuV3JpdGVMaW5lKCJXZWxjb21lIik7Cn0KYGBgCgojIyBFbCBvcGVyYWRvciBjb25kaWNpb25hbAoKLSBUYW1iacOpbiBsbGFtYWRvIG9wZXJhZG9yIHRlcm5hcmlvLgotIFBvZGVtb3MgaGFjZXIgdW5hIG9wZXJhY2nDs24gY29uZGljaW9uYWwgYXNpIGNvbW8gZW4gZWwgaWYgcGVybyBjb24gdW5hCiAgc29sYSBsw61uZWEgZGUgY8OzZGlnby4KCmBgYCBjc2hhcnAKRXhwcjEgPyBFeHByMiA6IEV4cHIzOwpgYGAKCi0gTGEgRXhwcjEsIGVzIGV2YWx1YWRhLCBzaSBlc3RhIGVzIHZlcmRhZGVyYS4KICAtIEVudG9uY2VzIEV4cDIgZXMgZXZhbHVhZGEgeSBzZSBjb252aWVydGUgZW4gZWwgdmFsb3IgZGUgdG9kYSBsYQogICAgZXhwcmVzacOzbi4KLSBTaSBFeHByMSBlcyBmYWxzYSwgZW50b25jZXMgRXhwMyBlcyBldmFsdWFkYSB5IHNlIGNvbnZpZXJ0ZSBlbiBlbAogIHZhbG9yIGRlIHRvZGEgbGEgZXhwcmVzacOzbi4KCmBgYCBjc2hhcnAKaW50IGFnZSA9IDQyOwpzdHJpbmcgbXNnOwptc2cgPSAoYWdlID49IDE4KSA/ICJXZWxjb21lIiA6ICJTb3JyeSI7CkNvbnNvbGUuV3JpdGVMaW5lKG1zZykKYGBgCgojIE3DqXRvZG9zCgojIyBJbnRyb2R1Y2Npw7NuIGEgbG9zIG3DqXRvZG9zCgotIFVuIG3DqXRvZG8gZXMgdW4gZ3J1cG8gZGUgZGVjbGFyYWNpb25lcyBxdWUgaGFjZW4gdW5hIHRhcmVhIGVuCiAgcGFydGljdWxhci4KLSBBZGVtw6FzIGRlIGxvcyBtw6l0b2RvcyBxdWUgdGllbmUgQyMgcHVlZGVzIGRlZmluaXIgbG9zIHR1eW9zLgotIFRpZW5lbiBtdWNoYXMgdmVudGFqYXM6CiAgLSBTb24gY8OzZGlnbyByZXVzYWJsZS4KICAtIEbDoWNpbGVzIGRlIHRlc3RlYXIuCiAgLSBNb2RpZmljYWNpb25lcyBhIHVuIG3DqXRvZG8gbm8gYWZlY3RhbiBhbCBwcm9ncmFtYS4KICAtIFVuIG3DqXRvZG8gcHVlZGUgYWNlcHRhciBkaWZlcmVudGVzIHRpcG9zIGRlIGlucHV0cy4KCj4gVG9kbyBwcm9ncmFtYSBkZSBDIyB0aWVuZSBhbCBtZW5vcyB1biBtw6l0b2RvLCBlbCBtw6l0b2RvIGBNYWluYC4KCiMjIERlY2xhcmFuZG8gbcOpdG9kb3MKCi0gUGFyYSB1c2FyIHVuIG3DqXRvZG8gcHJpbWVybyBuZWNlc2l0YXMgZGVjbGFyYXJsbywgeSBkZXNwdcOpcyBsbGFtYXJsby4KLSBDYWRhIGRlY2xhcmFjacOzbiBkZSBtw6l0b2RvIGluY2x1eWU6CiAgLSBFbCB0aXBvIGRlIGRhdG8gcXVlIHJldG9ybmEuCiAgLSBFbCBub21icmUgZGVsIG3DqXRvZG8uCiAgLSBVbmEgbGlzdGEgb3BjaW9uYWwgZGUgcGFyw6FtZXRyb3MuCgpgYGAgY3NoYXJwCjx0aXBvIGRlIGRhdG8gZGUgcmV0b3Jubz4gbmFtZSh0eXBlMSBwYXJ0MSwgdHlwZTIgcGFydDIsIC4uLiwgdHlwZU4gcGFydE4pewogICAgLy9CbG9xdWUgZGUgY8OzZGlnby4uCiAgICByZXR1cm4gPHRpcG8gZGUgZGF0bz4KfQpgYGAKCmBgYCBjc2hhcnAKaW50IFNxcihpbnQgeCkKICAgIHsKICAgICAgICBpbnQgcmVzdWx0ID0geCAqIHg7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KYGBgCgotIFBvZGVtb3MgaGFjZXIgcXVlIG3DqXRvZG9zIG5vIHJldG9ybmVuIG5hZGEgcG9uacOpbmRvbGVzIGVsIHRpcG8gZGUgZGF0bwogIGB2b2lkYC4KCiMjIExsYW1hbmRvIGEgbcOpdG9kb3MKCmBgYCBjc2hhcnAKc3RhdGljIHZvaWQgU2F5SGkoKQogICAgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJIZWxsbyIpOwogICAgfQoKc3RhdGljIHZvaWQgTWFpbihzdHJpbmdbXSBhcmdzKQogICAgewogICAgICAgIFNheUhpKCk7CiAgICB9CmBgYAoKPiBBcXXDrSBkZWNsYXJhbW9zIHVuIG3DqXRvZG8geSBsbyBsbGFtYW1vcyBkZXNkZSBgTWFpbmAsIGxhIHBhbGFicmEKPiBgc3RhdGljYCBlcyBwYXJhIGhhY2VyIGxvcyBtw6l0b2RvcyBhY2Nlc2libGVzIGFsIGBNYWluYC4KCiMjIFBhcsOhbWV0cm9zCgotIExhcyBkZWNsYXJhY2lvbmVzIGRlIG3DqXRvZG9zIHB1ZWRlbiBkZWZpbmlyIHVuYSBzZXJpZSBkZSBwYXLDoW1ldHJvcwogIHBhcmEgdHJhYmFqYXIuCi0gRXN0b3MgcGFyw6FtZXRyb3Mgc29uIHZhcmlhYmxlcyBxdWUgYWNlcHRhbiB2YWxvcmVzIGVzcGVjw61maWNvcy4KCmBgYCBjc2hhcnAKdm9pZCBQcmludChpbnQgeCkKICAgIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSh4KTsKICAgIH0KYGBgCgo+IExhcyBkZWNsYXJhY2lvbmVzIGRlIHBhcsOhbWV0cm9zIHNvbiBzaW1pbGFyZXMgYSBsYXMgZGVjbGFyYWNpb25lcyBkZQo+IHZhcmlhYmxlczsgRXN0YXMgc29sbyBleGlzdGVuIGRlbnRybyBkZWwgbcOpdG9kbyBkb25kZSBzZSBkZWNsYXJhcm9uLgoKYGBgIGNzaGFycAp2b2lkIFByaW50KGludCB4KQogICAgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKHgpOwogICAgfQoKc3RhdGljIHZvaWQgTWFpbihzdHJpbmdbXSBhcmdzKQogICAgewogICAgICAgIFByaW50KDQyKTsKICAgIH0KYGBgCgo+IEFob3JhIHBvZGVtb3MgbGxhbWFyIGEgbnVlc3RybyBtw6l0b2RvIHkgcGFzYXJsZSBhcmd1bWVudG9zLgoKIyMjIFBhcsOhbWV0cm9zIG3Dumx0aXBsZXMKCi0gU2UgcHVlZGVuIHRlbmVyIE4gbsO6bWVybyBkZSBwYXLDoW1ldHJvcyBlbiB1biBtw6l0b2RvIHNlcGFyw6FuZG9sb3MgY29uCiAgY29tYXMgZW4gbGEgZGVmaW5pY2nDs24uCgpgYGAgY3NoYXJwCmludCBTdW0oaW50IHgsIGludCB5KQogICAgewogICAgICAgIHJldHVybiB4ICsgeTsKICAgIH0KYGBgCgo+IExvcyBtw6l0b2RvcyByZXRvcm5hbiB2YWxvcmVzIGNvbiBsYSBwYWxhYnJhIGByZXR1cm5gLgoKYGBgIGNzaGFycAppbnQgU3VtKGludCB4LCBpbnQgeSkKICAgIHsKICAgICAgICByZXR1cm4geCArIHk7CiAgICB9CgpzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpCiAgICB7CiAgICAgICAgc3VtYSA9IFN1bSg0MiwgNDUpOwogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKHN1bWEpOwogICAgfQpgYGAKCj4gUG9kZW1vcyBhc2lnbmFyIHBhcsOhbWV0cm9zIG3Dumx0aXBsZXMgY3VhbmRvIGxsYW1hbW9zIGFsIG3DqXRvZG8sCj4gc2VwYXLDoW5kb2xlcyBjb24gY29tYXMsIGFzaSBjb21vIHRhbWJpw6luIGd1YXJkYXIgbG8gcXVlIG5vcyByZWdyZXNhIGVsCj4gbcOpdG9kbyBlbiB1bmEgdmFyaWFibGUgcGFyYSB1c2FybG8gZGVzcHXDqXMuCgojIyMgUGFyw6FtZXRyb3Mgb3BjaW9uYWxlcwoKLSBDdWFuZG8gZGVmaW5lcyBtw6l0b2RvcyBwdWVkZXMgZGVjbGFyYXIgdmFsb3JlcyBwb3IgZGVmZWN0byBhCiAgcGFyw6FtZXRyb3Mgb3BjaW9uYWxlcy4KLSBTaSBlc3RvcyBwYXLDoW1ldHJvcyBubyBlc3TDoW4gcHJlc2VudGVzIGN1YW5kbyBzZSBsbGFtYSBhbCBtw6l0b2RvIHNlCiAgdXNhbiBsb3MgdmFsb3JlcyBwb3IgZGVmZWN0by4KCmBgYCBjc2hhcnAKc3RhdGljIGludCBQb3coaW50IHgsIGludCB5PTIpCiAgICB7CiAgICBpbnQgcmVzdWx0ID0gMTsKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgeTsgaSsrKQogICAgICAgIHsKICAgICAgICAgICAgcmVzdWx0ICo9IHg7CiAgICAgICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgICB9CmBgYAoKPiBFbCBtw6l0b2RvIGBQb3dgIGFzaWduYSB1biB2YWxvciBwb3IgZGVmZWN0byBkZSAyIGFsIHBhcsOhbWV0cm8geS4KCmBgYCBjc2hhcnAKc3RhdGljIHZvaWQgTWFpbihzdHJpbmdbXSBhcmdzKQogICAgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKFBvdyg0KSk7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoUG93KDQsMykpOwogICAgfQpgYGAKCiMjIyBQYXLDoW1ldHJvcyBub21icmFkb3MKCi0gTG9zIGFyZ3VtZW50b3Mgbm9tYnJhZG9zIG5vcyBheXVkYW4gYSBubyB0ZW5lciBxdWUgcmVjb3JkYXIgZWwgb3JkZW4KICBkZSBsb3MgcGFyw6FtZXRyb3MuCi0gQ2FkYSBhcmd1bWVudG8gcHVlZGUgc2VyIGVzcGVjaWZpY2FkbyBhIGxhIHZhcmlhYmxlIGEgbGEgcXVlCiAgcGVydGVuZWNlLgoKYGBgIGNzaGFycApzdGF0aWMgaW50IEFyZShpbnQgaCwgaW50IHcpCiAgICB7CiAgICAgICAgcmV0dXJuIGggKiB3OwogICAgfQoKc3RhdGljIHZvaWQgTWFpbihzdHJpbmdbXSBhcmdzKQogICAgewogICAgICAgIGludCByZXMgPSBBcmVhKHc6IDUsIGg6IDgpOwogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKHJlcyk7CiAgICB9CmBgYAoKIyMgUGFzYW5kbyBhcmd1bWVudG9zCgotIEhheSB0cmVzIG1hbmVyYXMgZGUgcGFzYXIgYXJndW1lbnRvcyBhIHVuIG3DqXRvZG8gY3VhbmRvIGVzdGUgZXMKICBsbGFtYWRvLgogIC0gUG9yIHZhbG9yLCBwb3IgcmVmZXJlbmNpYSB5IGNvbW8gKk91dHB1dCouCiAgLSBTaSBzZSBoYWNlIHBvciB2YWxvciwgY29waWEgZWwgYXJndW1lbnRvIGRlbCB2YWxvciBkZW50cm8gZGVsCiAgICBwYXLDoW1ldHJvIGZvcm1hbCBkZWwgbcOpdG9kby4KICAgIC0gRXN0ZSBlcyBlbCBjb21wb3J0YW1pZW50byBwb3IgZGVmZWN0byBkZSBDIy4KCmBgYCBjc2hhcnAKc3RhdGljIHZvaWQgU3FydChpbnQgeCkKICAgIHsKICAgICAgICB4ID0geCAqIHg7CiAgICB9CnN0YXRpYyB2b2lkIE1haW4oKQogICAgewogICAgICAgIGludCBhID0gMzsKICAgICAgICBTcXJ0KGEpOwogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKGEpOyAvLyBpbXByaW1lIDMKICAgIH0KYGBgCgotIEVuIGVzdGUgY2FzbyBgeGAgZXMgcGFyw6FtZXRybyBkZSBgU3FydGAsIHkgYSBlcyBlbCB2YWxvciBwYXNhZG8gYWwKICBtw6l0b2RvLgoKPiBFbCBtw6l0b2RvIGBTcXJ0KClgIG5vIGNhbWJpYSBlbCB2YWxvciBkZSBsYSB2YXJpYWJsZSwgdHJhYmFqYSBjb24gZWwKPiB2YWxvciwgbm8gY29uIGxhIHZhcmlhYmxlLgoKIyMjIFBhc2FuZG8gcG9yIHJlZmVyZW5jaWEKCi0gUGFzYXIgdW4gYXJndW1lbnRvIHBvciByZWZlcmVuY2lhLCBjb3BpYSBsYSBkaXJlY2Npw7NuIGRlIG1lbW9yaWEgZW4gZWwKICBwYXLDoW1ldHJvIGZvcm1hbCBkZWwgbcOpdG9kby4KICAtIERlbnRybyBkZSBlc3RlLCBlc3RhIGRpcmVjY2nDs24gZXMgdXNhZGEgcGFyYSBhY2NlZGVyIGFsIGFyZ3VtZW50by4KICAgIC0gRXN0byBzaWduaWZpY2EgcXVlIGxvcyBjYW1iaW9zIHF1ZSBzZSBoYWNlbiBkZW50cm8gZGVsIG3DqXRvZG8sCiAgICAgIGFmZWN0YW4gYWwgcGFyw6FtZXRyby4KCmBgYCBjc2hhcnAKc3RhdGljIHZvaWQgU3FydChyZWYgaW50IHgpIC8vIDwtLS0KICAgIHsKICAgICAgICB4ID0geCAqIHg7CiAgICB9CnN0YXRpYyB2b2lkIE1haW4oKQogICAgewogICAgICAgIGludCBhID0gMzsKICAgICAgICBTcXJ0KHJlZiBhKTsgLy8gPC0tLQogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKGEpOyAvLyBpbXByaW1lIDkKICAgIH0KYGBgCgojIyMgUGFzYW5kbyBwb3IgT3V0cHV0CgotIFBhcmVjaWRvcyBhIHBhc2FyIHBvciByZWZlcmVuY2lhLgogIC0gTGEgZGlmZXJlbmNpYSBlc3RhIGVuIHF1ZSBlc3RvcyB0cmFuc2ZpZXJlbiBkYXRvcyBmdWVyYSBkZWwgbcOpdG9kbwogICAgKGNvbW8gdW4gcmV0dXJuKS4KLSBTb24gw7p0aWxlcyBwYXJhIHJldG9ybmFyIHZhcmlvcyB2YWxvcmVzIGRlIHVuIG3DqXRvZG8uCi0gU29uIGRlbm90YWRvcyBwb3IgbGEgcGFsYWJyYSBgb3V0YC4KCmBgYCBjc2hhcnAKc3RhdGljIHZvaWQgR2V0VmFsdWVzKG91dCBpbnQgeCwgb3V0IGludCB5KSAvLyA8LS0tCiAgICB7CiAgICAgICAgeCA9IDU7CiAgICAgICAgeSA9IDEwOwogICAgfQpzdGF0aWMgdm9pZCBNYWluKCkKICAgIHsKICAgICAgICBpbnQgYSwgYjsKICAgICAgICBHZXRWYWx1ZXMob3V0IGEsIG91dCBiKTsKICAgICAgICAvLyBBaG9yYSBhID0gNSB5IGIgPSAxMAogICAgfQpgYGAKCj4gTGFzIHZhcmlhYmxlcyBkZWJlbiBkZSBlc3RhciBpbmljaWFsaXphZGFzLCBwZXJvIG5vIHRlbmVyIG5pbmfDum4KPiB2YWxvci4KCiMjIFNvYnJlY2FyZ2EKCi0gTGEgU29icmVjYXJnYSBkZSBtw6l0b2RvcyBlcyBjdWFuZG8gZG9zIG3DqXRvZG9zIHRpZW5lbiBlbCBtaXNtbyBub21icmUKICBwZXJvIGRpZmVyZW50ZXMgcGFyw6FtZXRyb3MuCgpgYGAgY3NoYXJwCnZvaWQgUHJpbnQoaW50IGEpCiAgICB7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIlZhbHVlOiAiICsgYSk7CiAgICB9CnZvaWQgUHJpbnQoZG91YmxlIGEpCiAgICB7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIlZhbHVlOiAiICsgYSk7CiAgICB9CmBgYAoKPiBDb24gbGEgc29icmVjYXJnYSBwb2RlbW9zIHRlbmVyIHVuYSBtaXNtYSBmdW5jacOzbiBxdWUgZnVuY2lvbmUgY29uCj4gYGludGAgeSBjb24gYGRvdWJsZWAuCgotIEN1YW5kbyBzZSBoYWNlIHNvYnJlY2FyZ2EsIGxhIGRlZmluaWNpw7NuIGRlIGxvcyBtw6l0b2RvcyBkZWJlIGRpZmVyaXIKICBlbiBzdSB0aXBvIG8gbnVtZXJvIGRlIGFyZ3VtZW50b3MuCiAgLSBDdWFuZG8gc2UgbGxhbWUsIGVzdGEgbGxhbWFkYSBsbGVnYXJhIGEgbGEgaW1wbGVtZW50YWNpw7NuIHF1ZQogICAgY29pbmNpZGEgY29uIGxvIHF1ZSBzZSBkYS4KLSBUb2RvcyBsb3MgbcOpdG9kb3MgZGViZW4gY29pbmNpZGlyIGVuIGVsIHRpcG8gZGUgcmV0b3JubyBxdWUgdGllbmVuLgoKIyMgUmVjdXJzaXZpZGFkCgotIEVzIHVuIG3DqXRvZG8gcXVlIHNlIGxsYW1hIGEgc2kgbWlzbW8uCi0gVW4gZWplbXBsbyBwdWVkZSBzZXIgZWwgY2FsY3VsbyBkZWwgZmFjdG9yaWFsIGRlIHVuIG7Dum1lcm8uCiAgLSBudW0gXCogbnVtLTEgaGFzdGEgMS4KCmBgYCBjc2hhcnAKc3RhdGljIGludCBGYWN0KGludCBudW0pCiAgICB7CiAgICAgICAgaWYgKG51bSA9PSAxKSB7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVtICogRmFjdChudW0tMSk7CiAgICB9CmBgYAoKIyBDbGFzZXMgeSBvYmpldG9zCgojIyBDbGFzZXMKCi0gRW4gbGEgcHJvZ3JhbWFjacOzbiBvcmllbnRhZGEgYSBvYmpldG9zIHVuYSBjbGFzZSBlcyB1biB0aXBvIGRlIGRhdG8KICBxdWUgZGVmaW5lIHVuIGNvbmp1bnRvIGRlOgogIC0gVmFyaWFibGVzIHkgbcOpdG9kb3MgcGFyYSB1biBvYmpldG8gZGVjbGFyYWRvLgotIFVuYSBjbGFzZSBlcyBjb21vIHVuIHBsYW5vLgogIC0gRGVmaW5lIGRhdG9zIHkgY29tcG9ydGFtaWVudG9zIHBhcmEgdW4gdGlwby4KCmBgYCBjc2hhcnAKY2xhc3MgTWlQcmltZXJhQ2xhc2UKICAgIHsKICAgICAgICAvL3ZhcmlhYmxlcywgbcOpdG9kb3MsIGV0Yy4KICAgIH0KYGBgCgo+IERlZmluZSB1biB0aXBvIGRlIGRhdG8gcGFyYSBvYmpldG9zLCBwZXJvIG5vIGVzIHVuIG9iamV0by4KCiMjIE9iamV0b3MKCi0gVW5hIGNsYXNlIHB1ZWRlIHVzYXJzZSBwYXJhIGRlY2xhcmFyIG3Dumx0aXBsZXMgb2JqZXRvcy4KLSBVbiBvYmpldG8gZXMgbGxhbWFkbyB0YW1iacOpbiBlcyBsbGFtYWRvIHVuYSBpbnN0YW5jaWEgZGUgdW5hIGNsYXNlLgotIENhZGEgb2JqZXRvIHRpZW5lIHN1cyBwcm9waWFzIGNhcmFjdGVyw61zdGljYXMsIGxsYW1hZGFzIGF0cmlidXRvcy4KICAtIExhcyBjdWFsZXMgc29uIGhlcmVkYWRhcyBkZSBsYSBjbGFzZSBkZSBsYSBjdWFsIGVzIGluc3RhbmNpYS4KCiMjIFZhbG9yIHkgdGlwb3MgZGUgcmVmZXJlbmNpYQoKIyMjIFRpcG9zIGRlIFZhbG9yCgotIEMjIHRpZW5lIGRvcyBmb3JtYXMgZGUgZ3VhcmRhciB2YWxvcmVzLCBwb3IgcmVmZXJlbmNpYSB5IHBvciB2YWxvci4KLSBMb3MgdGlwb3MgZGUgZGF0byBwcmVkZXRlcm1pbmFkb3Mgc29uIHVzYWRvcyBwYXJhIGRlY2xhcmFyIHZhcmlhYmxlcwogIHF1ZSBzb24gdGlwb3MgZGUgdmFsb3IuCiAgLSBTdSB2YWxvciBlcyBndWFyZGFkbyBlbiBsYSBtZW1vcmlhIGVuIHVuIGx1Z2FyIGxsYW1hZG8gKnN0YWNrKiAobGEKICAgIHBpbGEpLgoKIyMjIFRpcG9zIGRlIHJlZmVyZW5jaWEuCgotIEVsIHRpcG8gZGUgcmVmZXJlbmNpYSBlcyB1c2FkbyBwYXJhIGd1YXJkYXIgb2JqZXRvcy4KICAtIENvbW8gcG9yIGVqZW1wbG8gY3VhbmRvIGluc3RhbmNpYXMgdW4gb2JqZXRvIGVzIGd1YXJkYWRvIGNvbW8gdW4KICAgIHRpcG8gZGUgcmVmZXJlbmNpYS4KLSBFc3RvcyBzb24gZ3VhcmRhZG9zIGVuIHVuYSBwYXJ0ZSBkZSBsYSBtZW1vcmlhIGxsYW1hZGEgKmhlYXAqCiAgKE1vbnTDrWN1bG8pLgogIC0gQ3VhbmRvIGluc3RhbmNpYXMgdW4gb2JqZXRvLCBsb3MgZGF0b3MgZGUgZXN0ZSBzb24gZ3VhcmRhZG9zIGVuIGxhCiAgICAqaGVhcCogbWllbnRyYXMgcXVlIGxhIGRpcmVjY2nDs24gZGUgbWVtb3JpYSBkZSBsYSBoZWFwIGVzIGd1YXJkYWRhCiAgICBlbiBlbCAqc3RhY2sqLgoKPGltZyBzcmM9Ii4vaW1hZ2VzL1NTLTAxLnBuZyIgYWx0PSI6YWxpZ24gY2VudGVyIiBjbGFzcz0iaW1nIiAvPgoKYFN0YWNrYCAgCkVzIHVzYWRvIHBhcmEgYXNpZ25hY2nDs24gZGUgbWVtb3JpYSBlc3TDoXRpY2EsIGVzbyBpbmNsdXllIGEgdG9kYXMgdHVzCnZhcmlhYmxlcyBjb21vIHguCgpgSGVhcGAgIApFcyB1c2FkYSBwYXJhIGFzaWduYWNpw7NuIGRlIG1lbW9yaWEgZGluw6FtaWNhLCBlc28gaW5jbHV5ZSBvYmpldG9zCipjdXN0b20qIHF1ZSBwb2Ryw61hbiBuZWNlc2l0YXIgbcOhcyBtZW1vcmlhIGR1cmFudGUgbGEgZWplY3VjacOzbiBkZSB1bgpwcm9ncmFtYS4KCiMjIENsYXNlcwoKYGBgIGNzaGFycApjbGFzcyBQZXJzb24KICAgIHsKICAgICAgICBpbnQgYWdlOwogICAgICAgIHN0cmluZyBuYW1lOwogICAgICAgIHB1YmxpYyB2b2lkIFNheUhpKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIkhvbGEiKTsKICAgICAgICAgICAgfQogICAgfQpgYGAKCi0gRW4gZWwgY8OzZGlnbyBkZSBhcnJpYmEgdGVuZW1vcyB1bmEgY2xhc2UgUGVyc29uYS4KICAtIFRpZW5lIGxhcyB2YXJpYWJsZXMgYGFnZWAgeSBgbmFtZWAsIGFzaSBjb21vIGVsIG3DqXRvZG8gYFNheUhpYC4KLSBQb2RlbW9zIGluY2x1aXIgYGFjY2VzcyBtb2RpZmllcnNgIChtb2RpZmljYWRvcmVzIGRlIGFjY2VzbyksIHRhbWJpw6luCiAgbGxhbWFkb3MgYG1lbWJlcnNgIChtaWVtYnJvcykuCiAgLSBTb24gcGFsYWJyYXMgY2xhdmVzIHVzYWRhcyBwYXJhIGVzcGVjaWZpY2FyIGxhIGFjY2VzaWJpbGlkYWQgYSB1bgogICAgbWllbWJyby4KICAtIFVuIG1pZW1icm8gZGVmaW5pZG8gY29tbyBww7pibGljbyBwdWVkZSBzZSBhY2NlZGlkbyBkZXNkZSBhZnVlcmEgZGUKICAgIGxhIGNsYXNlLgogICAgLSBQb3IgZXNvIGVzIHF1ZSBgU2F5SGkoKWAgZXMgcMO6YmxpY28uCgpgYGAgY3NoYXJwCmNsYXNzIFBlcnNvbiB7CiAgICBpbnQgYWdlOwogICAgc3RyaW5nIG5hbWU7CiAgICBwdWJsaWMgdm9pZCBTYXlIaSgpIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiSGkiKTsKICAgIH0KfQpzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpCnsKICAgIFBlcnNvbiBwMSA9IG5ldyBQZXJzb24oKTsKICAgIHAxLlNheUhpKCk7Cn0KYGBgCgotIEVsIG9wZXJhZG9yIGBuZXdgLCBpbnN0YW5jaWEgYWwgb2JqZXRvIHkgcmV0b3JuYSB1bmEgcmVmZXJlbmNpYSBkZQogIGVzdGUgYSBzdSBwb3NpY2nDs24gZW4gbGEgaGVhcC4KLSBFbCBjw7NkaWdvIGRlIGFycmliYSBpbnN0YW5jaWEgdW4gb2JqZXRvIHRpcG8gYFBlcnNvbmAgbGxhbWFkbyBgcDFgIHkKICBsbyB1c2EgcGFyYSBsbGFtYXIgYWwgbcOpdG9kbyBww7pibGljbyBgU2F5SGkoKWAuCgpgYGAgY3NoYXJwCmNsYXNzIERvZwp7CiAgICBwdWJsaWMgc3RyaW5nIG5hbWU7CiAgICBwdWJsaWMgaW50IGFnZTsKfQpzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpCnsKICAgIERvZyBib2IgPSBuZXcgRG9nKCk7CiAgICBib2IubmFtZSA9ICJCb2JieSI7CiAgICBib2IuYWdlID0gMzsKCiAgICBDb25zb2xlLldyaXRlTGluZShib2IuYWdlKTsKfQpgYGAKCi0gUG9kZW1vcyBhY2NlZGVyIGEgbG9zIG1pZW1icm9zIHDDumJsaWNvcyBkZSB1bmEgY2xhc2UsIGVuIGVsIGVqZW1wbG8KICBsYXMgdmFyaWFibGVzIG5vbWJyZSB5IGVkYWQuCgojIyBFbmNhcHN1bGFjacOzbgoKLSBFbiBwcm9ncmFtYWNpw7NuIHNlIHJlZmllcmUgYSByZXN0cmluZ2lyIGVsIGFjY2VzbyBhIGNpZXJ0YXMgcGFydGVzIGRlCiAgdW5hIGNsYXNlLgogIC0gRXMgbGxhbWFkbyB0YW1iacOpbiBgaW5mb3JtYXRpb24gaGlkaW5nYC4KICAtIE5vcyBwZXJtaXRlIG9jdWx0YXIgZGV0YWxsZXMgZGUgdW5hIGNsYXNlLgotIEMjIG5vcyBkYSBsYXMgc2lndWllbnRlcyBtb2RpZmljYWRvcmVzIGRlIGFjY2VzbzoKICAtIGBwdWJsaWNgLgogICAgLSBIYWNlIHVuIG1pZW1icm8gYWNjZXNpYmxlIGRlc2RlIGZ1ZXJhIGRlIGxhIGNsYXNlLgogIC0gYHByaXZhdGVgLgogICAgLSBIYWNlIGxvcyBtaWVtYnJvcyBhY2Nlc2libGVzIHNvbG8gZGVudHJvIGRlIGxhIGNsYXNlIHkgbG9zIG9jdWx0YQogICAgICBmdWVyYSBkZSBlc3RhLgogIC0gYHByb3RlY3RlZGAuCiAgLSBgaW50ZXJuYWxgLgogIC0gYHByb3RlY3RlZCBpbnRlcm5hbGAuCgpgYGAgY3NoYXJwCmNsYXNzIEJhbmtBY2NvdW50IHsKICAgIHByaXZhdGUgZG91YmxlIGJhbGFuY2U9MDsKICAgIHB1YmxpYyB2b2lkIERlcG9zaXQoZG91YmxlIG4pIHsKICAgICAgICBiYWxhbmNlICs9IG47CiAgICB9CiAgICBwdWJsaWMgdm9pZCBXaXRoZHJhdyhkb3VibGUgbikgewogICAgICAgIGJhbGFuY2UgLT0gbjsKICAgIH0KICAgIHB1YmxpYyBkb3VibGUgR2V0QmFsYW5jZSgpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZTsKICAgIH0KfQpjbGFzcyBQcm9ncmFtCnsKICAgIHN0YXRpYyB2b2lkIE1haW4oc3RyaW5nW10gYXJncykKICAgIHsKICAgICAgICBCYW5rQWNjb3VudCBiID0gbmV3IEJhbmtBY2NvdW50KCk7CiAgICAgICAgYi5EZXBvc2l0KDE5OSk7CiAgICAgICAgYi5XaXRoZHJhdyg0Mik7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoYi5HZXRCYWxhbmNlKCkpOwogICAgfQp9CmBgYAoKLSBVc2Ftb3MgZW5jYXBzdWxhY2nDs24gcGFyYSBvY3VsdGFyIGxhIHZhcmlhYmxlIGBiYWxhbmNlYC4KLSBBdW4gYXPDrSBwb2RlbW9zIGFjY2VkZXIgYSBgYmFsYW5jZWAgbWVkaWFudGUgbG9zIG3DqXRvZG9zIGBEZXBvc2l0KClgLAogIGBXaXRoZHJhdygpYCB5IGBHZXRCYWxhbmNlKClgLgogIC0gQXPDrSBwb2RlbW9zIHRlbmVyIGVsIGNvbnRyb2wgc29icmUgbG8gcXVlIHBhc2EgY29uIGxhIHZhcmlhYmxlCiAgICBgYmFsYW5jZWAgeSBhcGxpY2FyIGRpc3RpbnRhcyB2ZXJpZmljYWNpb25lcyBzb2JyZSBsbyBxdWUgcXVlcmVtb3MKICAgIGhhY2VyLgotIExhIGVuY2Fwc3VsYWNpw7NuIG5vcyBwZXJtaXRlOgogIC0gQ29udHJvbGFyIGxhIG1hbmVyYSBlbiBsYSBxdWUgc2UgYWNjZWRlIGEgbG9zIGRhdG9zIG8gZW4gbGEgcXVlIHNlCiAgICBtb2RpZmljYW4uCiAgLSBQb2RlbW9zIGV4dGVuZGVyIGVsIGPDs2RpZ28gZGUgdW5hIG1hbmVyYSBtw6FzIHNlZ3VyYSB5IGxpbXBpYSBhCiAgICBudWV2b3MgcmVxdWVyaW1pZW50b3MuCgojIyBDb25zdHJ1Y3RvcmVzCgotIEVzIHVuIG1pZW1icm8gZXNwZWNpYWwgZGUgdW5hIGNsYXNlIHF1ZSBzZSBlamVjdXRhIGN1YW5kbyBzZSBjcmVhIHVuCiAgbnVldm8gb2JqZXRvIGRlIGVzdGEgY2xhc2UuCi0gVGllbmVuIGVsIG1pc21vIG5vbWJyZSBxdWUgbGEgY2xhc2UsIHNvbiBww7pibGljb3MgeSBubyB0aWVuZW4gbmluZ8O6bgogIHJldG9ybm8uCgpgYGAgY3NoYXJwCmNsYXNzIFBlcnNvbgp7CiAgcHJpdmF0ZSBpbnQgYWdlOwogIHB1YmxpYyBQZXJzb24oKQogIHsKICAgIENvbnNvbGUuV3JpdGVMaW5lKCJIaSB0aGVyZSIpOwogIH0KfQpgYGAKCi0gRXN0byBlcyDDunRpbCBjdWFuZG8gbmVjZXNpdGFtb3MgcXVlIGVsIG9iamV0byBzZWEgY3JlYWRvIGNvbiBjaWVydG9zCiAgcGFyw6FtZXRyb3MuCiAgLSBQb3IgZGVmYXVsdCBubyB0aWVuZW4gcGFyw6FtZXRyb3MsIHBlcm8gc2kgc2UgbmVjZXNpdGFuIHB1ZWRlbgogICAgYWdyZWdhcnNlLgoKYGBgIGNzaGFycApjbGFzcyBQZXJzb24KewogICAgcHJpdmF0ZSBpbnQgYWdlOwogICAgcHJpdmF0ZSBzdHJpbmcgbmFtZTsKICAgIHB1YmxpYyBQZXJzb24oc3RyaW5nIG5tKQogICAgewogICAgICAgIG5hbWUgPSBubTsKICAgIH0KICAgIHB1YmxpYyBzdHJpbmcgZ2V0TmFtZSgpCiAgICB7CiAgICAgICAgcmV0dXJuIG5hbWU7CiAgICB9Cn0Kc3RhdGljIHZvaWQgTWFpbihzdHJpbmdbXSBhcmdzKQp7CiAgICBQZXJzb24gcCA9IG5ldyBQZXJzb24oIkRhdmlkIik7CiAgICBDb25zb2xlLldyaXRlTGluZShwLmdldE5hbWUoKSk7Cn0KYGBgCgo+IEVuIGVsIGVqZW1wbG8gY3JlYW1vcyB1biBvYmpldG8gcGFzw6FuZG9sZSB1biBhcmd1bWVudG8gYWwgY29uc3RydWN0b3IuCgojIyBQcm9waWVkYWRlcwoKLSBFcyB1bmEgYnVlbmEgcHLDoWN0aWNhIGVuY2Fwc3VsYXIgbG9zIG1pZW1icm9zIGRlIHVuYSBjbGFzZSB5IHByb3ZlZXIKICBhY2Nlc28gYSBlbGxvcyBzb2xvIGN1YW5kbyBlcyBuZWNlc2FyaW8uCi0gVW5hIHByb3BpZWRhZCBlcyB1biBtaWVtYnJvIHF1ZSBwcm92ZWUgdW4gbWVjYW5pc21vIGZsZXhpYmxlIHBhcmEKICBsZWVyLCBlc2NyaWJpciBvIGNvbXB1dGFyIGVsIHZhbG9yIGRlIHVuIGNhbXBvIHByaXZhZG8uCiAgLSBFc3RhcyBwdWVkZW4gc2VyIHVzYWRhcyBjb21vIG1pZW1icm9zIHDDumJsaWNvcyBwZXJvIGluY2x1eWVuIG3DqXRvZG9zCiAgICBsbGFtYWRvcyBgYWNjZXNzb3JzYC4KICAgIC0gRXN0b3MgaW5jbHV5ZW4gZGVjbGFyYWNpb25lcyBxdWUgcG9kZW1vcyB1c2FyIHBhcmEgb2J0ZW5lciAqZ2V0KgogICAgICAobGVlciBvIGNvbXB1dGFyKSBvICpzZXQqIChlc2NyaWJpcikgdW4gY2FtcG8gZW4gZXNwZWNpZmljby4KCmBgYCBjc2hhcnAKY2xhc3MgUGVyc29uIHsKICAgIHByaXZhdGUgc3RyaW5nIG5hbWU7IC8vY2FtcG8KCiAgICBwdWJsaWMgc3RyaW5nIE5hbWUgLy8gUHJvcGllZGFkCiAgICAgICAgewogICAgICAgICAgICBnZXQgeyByZXR1cm4gbmFtZTsgfQogICAgICAgICAgICBzZXQgeyBuYW1lID0gdmFsdWU7IH0KICAgICAgICB9Cn0KYGBgCgotIEVuIGVsIGVqZW1wbG8sIGxhIGNsYXNlIGBQZXJzb25gIHRpZW5lIHVuYSBwcm9waWVkYWQgbGxhbWFkYSBgTmFtZWAKICBxdWUgdGllbmUgdW4gYHNldGAgeSB1biBgZ2V0YCBwYXJhIGFjY2VkZXIgYSBlbCBjYW1wbyBgbmFtZWAuCgo+IGB2YWx1ZWAgcmVwcmVzZW50YSBlbCB2YWxvciBxdWUgbGUgYXNpZ25lbW9zIGEgdW5hIHByb3BpZWRhZCB1c2FuZG8KPiBgc2V0YC4KCj4gU2UgbGUgcHVlZGUgbGxhbWFyIGEgdW5hIHByb3BpZWRhZCBjb24gY3VhbHF1aWVyIG5vbWJyZSBwZXJvIGxhCj4gY29udmVuY2nDs24gZXMgcXVlIGxhcyBwcm9waWVkYWRlcyB0ZW5nYW4gZWwgbWlzbW8gbm9tYnJlIHF1ZSBlbCBjYW1wbwo+IHBlbyBjb24gbWF5w7pzY3VsYSBlbiBsYSBwcmltZXJhIGxldHJhLgoKVW5hIHZleiBsYSBwcm9waWVkYWQgZXMgZGVmaW5pZGEgcG9kZW1vcyB1c2FybGEgcGFyYSBhc2lnbmFyIG8gbGVlciBkZWwKbWllbWJyby4KCmBgYCBjc2hhcnAKc3RhdGljIHZvaWQgTWFpbihzdHJpbmdbXSBhcmdzKQogICAgewogICAgICAgIFBlcnNvbiBwID0gbmV3IFBlcnNvbjsKICAgICAgICBwLk5hbWUgPSAiQm9iIjsKICAgICAgICBDb25zb2xlLldyaXRlTGluZShwLk5hbWUpOwogICAgfQpgYGAKCj4gU2UgYWNjZWRlIGEgbGEgcHJvcGllZGFkIHBvciBzdSBub21icmUsIGNvbW8gY3VhbHF1aWVyIG1pZW1icm8gcMO6YmxpY28KPiBkZSBsYSBjbGFzZS4KCi0gUG9kZW1vcyB0ZW5lciB1bmEgcHJvcGllZGFkIGNvbiBzb2xvIHVuIGBnZXRgIHkgc2luIHVuIGBzZXRgIG8gaGFjZXIKICBsYSBwcm9waWVkYWQgcHJpdmFkYS4KLSBMYXMgcHJvcGllZGFkZXMgbm9zIHBlcm1pdGVuIHRlbmVyIGxhIG9wY2nDs24gZGUgY29udHJvbGFyIGxhIGzDs2dpY2EgZGUKICBhY2NlZGVyIGEgdW5hIHZhcmlhYmxlLgoKYGBgIGNzaGFycApjbGFzcyBQZXJzb24gewogICAgcHJpdmF0ZSBpbnQgYWdlPTA7CiAgICBwdWJsaWMgaW50IEFnZTsKICAgIHsKICAgICAgICBnZXQgeyByZXR1cm4gYWdlOyB9CiAgICAgICAgc2V0IHsKICAgICAgICAgICAgaWYgKHZhbHVlID4gMCkgewogICAgICAgICAgICAgICAgYWdlID0gdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KYGBgCgo+IEVuIGVsIGVqZW1wbG8gdmVyaWZpY2Ftb3MgcXVlIGVsIHZhbG9yIHF1ZSBsZSBhc2lnbmVtb3MgYSBgYWdlYCBzZWEKPiBtYXlvciBhIDAuCgojIyBQcm9waWVkYWRlcyBhdXRvIGltcGxlbWVudGFkYXMuCgotIEN1YW5kbyBubyBuZWNlc2l0YXMgbmluZ3VuYSBsw7NnaWNhIGxhcyBwcm9waWVkYWRlcywgQyMgcHJvdmVlIHVuYQogIG1hbmVyYSByw6FwaWRhIHBhcmEgZGVjbGFyYXIgbWllbWJyb3MgcHJpdmFkb3MgYSB0cmF2w6lzIGRlIHN1cwogIHByb3BpZWRhZGVzLgoKYGBgIGNzaGFycApwdWJsaWMgc3RyaW5nIE5hbWUgeyBnZXQ7IHNldDsgfQpgYGAKCi0gRXN0YSBlcyBsYSBsbGFtYWRhIHByb3BpZWRhZCBhdXRvLWltcGxlbWVudGFkYS4KLSBVc8OhbmRvbGEgeWEgbm8gbmVjZXNpdGFtb3MgZGVjbGFyYXIgZWwgY2FtcG8gcHJpdmFkbyBwb3Igc2VwYXJhZG8uCgpgYGAgY3NoYXJwCmNsYXNzIFBlcnNvbiB7CiAgICBwdWJsaWMgc3RyaW5nIE5hbWUgeyBnZXQ7IHNldDsgfQp9CnN0YXRpYyB2b2lkIE1haW4oc3RyaW5nW10gYXJncykKICAgIHsKICAgICAgICBQZXJzb24gcCA9IG5ldyBQZXJzb247CiAgICAgICAgcC5OYW1lID0gIkJvYiI7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUocC5OYW1lKTsKICAgIH0KLy8gSW1wcmltZSBCb2IKYGBgCgojIEFycmVnbG9zIHkgQ2FkZW5hcwoKIyMgQXJyZWdsb3MKCi0gVGFtYmnDqW4gbGxhbWFkb3MgKkFycmF5cyouCi0gQyMgcHJvdmVlIG51bWVyb3NhcyBjbGFzZXMgcGFyYSBndWFyZGFyIHkgbWFuaXB1bGFyIGRhdG9zLgotIEVzIHVuYSBjb2xlY2Npw7NuIGRlIGVsZW1lbnRvcyBkZWwgKiptaXNtbyB0aXBvKiouCgpgYGAgY3NoYXJwCi8vIGRlY2xhcmFjacOzbiBkZSB1biBhcnJheQppbnQgWyBdIG15QXJyYXk7CmBgYAoKPiBDb24gZXN0byBkZWNsYXJhbW9zIHVuIGFycmVnbG8gZGUgZW50ZXJvcy4KCi0gUGVybyBzYWJpZW5kbyBxdWUgbG9zIGFycmVnbG9zIHNvbiBvYmpldG9zLCBkZWJlbW9zIGRlY2xhcmFybG9zIGNvbW8KICB0YWwuCgpgYGAgY3NoYXJwCmludCBbIF0gbXlBcnJheSA9IG5ldyBpbnRbNV07CmBgYAoKPiBDb24gZXN0byBpbnN0YW5jaWFtb3MgdW4gYXJyZWdsbyBkZSBlbnRlcm9zIGNvbiA1IGVzcGFjaW9zIGRlbnRybyBkZQo+IGVsLgoKLSBEZXNwdcOpcyBkZSBjcmVhciB1biBhcnJlZ2xvIHBvZGVtb3MgYXNpZ25hciB2YWxvcmVzIGVuIHVuIMOtbmRpY2UKICBlc3BlY2lmaWNvLgoKYGBgIGNzaGFycAppbnQgWyBdIG15QXJyYXkgPSBuZXcgaW50WzVdOwpteUFycmF5WzBdID0gMjMKYGBgCgo+IEFxdcOtIGFzaWduYW1vcyBlbCBuw7ptZXJvIDIzIGVuIGxhIHBvc2ljacOzbiAwIGRlbCBhcnJlZ2xvLgoKLSBFbiBDIyBsb3MgYXJyZWdsb3MgZW1waWV6YW4gZW4gMC4KCmBgYCBjc2hhcnAKc3RyaW5nIFsgXSBuYW1lcyA9IG5ldyBzdHJpbmdbM10geyJKaG9uIiwgIkNlbmEiLCAiSm9zZSJ9OwpgYGAKCj4gUG9kZW1vcyBhc2lnbmFyIHZhbG9yZXMgaW5pY2lhbGVzIGEgdW4gYXJyZWdsbyBzZSBlc3RhIGZvcm1hLgoKLSBTaSBhc2lnbmFtb3MgdmFsb3JlcyBpbmljaWFsZXMgcG9kZW1vcyBvbWl0aXIgZWwgbsO6bWVybyBkZSBlbGVtZW50b3MKICBxdWUgc29uIGVuIGxhIGRlY2xhcmFjacOzbi4KLSBJbmNsdXNvIHBvZGVtb3Mgb21pdGlyIGVsIG9wZXJhZG9yIG5ldy4KCmBgYCBjc2hhcnAKc3RyaW5nIFsgXSBuYW1lcyA9IHsiSm9obiIsICJDZW5hIiwgIkpvc2UifTsKYGBgCgotIFBhcmEgYWNjZWRlciBhIGxvcyBlbGVtZW50b3MgZGVsIGFycmVnbG8gc29sbyB0ZW5lbW9zIHF1ZSBlc3BlY2lmaWNhcgogIGVsIG7Dum1lcm8gZGUgw61uZGljZSBxdWUgdGllbmUgZWwgZWxlbWVudG8uCgpgYGAgY3NoYXJwCkNvbnNvbGUuV3JpdGVMaW5lKG5hbWVzWzJdKTsKYGBgCgojIyBVc2FuZG8gYXJyZWdsb3MgZW4gY2ljbG9zCgotIEEgdmVjZXMgZXMgbmVjZXNhcmlvIGl0ZXJhciBzb2JyZSBsb3MgZWxlbWVudG9zIGRlIHVuIGFycmVnbG8uCgpgYGAgY3NoYXJwCmludFsgXSBhID0gbmV3IGludFsxMF07Cgpmb3IgKGludCBrID0gMDsgayA8IDEwOyBrKyspIHsKICBhW2tdID0gayoyOwp9CmBgYAoKLSBFc3RvIHNlIHB1ZWRlIGxvZ3JhciBkZSBtYW5lcmEgZsOhY2lsIHkgcsOhcGlkYSBjb24gdW4gY2ljbG8gYGZvcmAuCgpgYGAgY3NoYXJwCmZvciAoaW50IGsgPSAwOyBrIDwgMTA7IGsrKykgewogICAgQ29uc29sZS5Xcml0ZUxpbmUoYVtrXSk7Cn0KYGBgCgojIyMgRWwgY2ljbG8gYGZvcmVhY2hgCgotIEVsIGNpY2xvIGBmb3JlYWNoYCBub3MgZGEgdW5hIG1hbmVyYSBtw6FzIGbDoWNpbCBkZSBhY2NlZGVyIGEgbG9zCiAgZWxlbWVudG9zIGRlIHVuIGFycmVnbG8uCgpgYGAgY3NoYXJwCmZvcmVhY2ggKGludCBrIGluIGEpIHsKICAgIENvbnNvbGUuV3JpdGVMaW5lKGspOwp9CmBgYAoKPiBFc3RlIGVzIGVsIGVxdWl2YWxlbnRlIGRlIGVsIGVqZW1wbG8gYW50ZXJpb3IgY29uIHVuIGNpY2xvIGBmb3JgLgoKLSBFc3RlIGl0ZXJhIHNvYnJlIGVsIGFycmVnbG8sIHkgYXNpZ25hIGVsIHZhbG9yIGRlbCBlbGVtZW50byBhY3R1YWwgYQogIGBrYC4KCj4gRWwgdGlwbyBkZSBkYXRvIGRlbnRybyBkZWwgYGZvcmVhY2hgIGRlYmUgZGUgY29pbmNpZGlyIGNvbiBlbCB0aXBvIGRlCj4gbG9zIGVsZW1lbnRvcyBkZWwgYXJyZWdsby4KCmBgYCBjc2hhcnAKLy8gYSB2ZWNlcyBzZSB1c2EgbGEgcGFsYWJyYSB2YXIgZGVudHJvIGRlbCBmb3JlYWNoCmZvcmVhY2ggKHZhciBrIGluIGEpIHsKICAgIC8vYWFhYWFhCn0KYGBgCgotIEVzdG8gc2UgaGFjZSBwYXJhIHF1ZSBlbCBjb21waWxhZG9yIGRldGVybWluZSBlbCB0aXBvIGRlIGRhdG8KICBhcHJvcGlhZG8gYXV0b23DoXRpY2FtZW50ZS4KCiMjIEFycmVnbG9zIG11bHRpZGltZW5zaW9uYWxlcwoKLSBMb3MgYXJyZWdsb3MgcHVlZGVuIHRlbmVyIG3Dumx0aXBsZXMgZGltZW5zaW9uZXMuCgpgYGAgY3NoYXJwCmludCBbICwgXSB4ID0gbmV3IGludFszLDRdOwpgYGAKCj4gRXN0byBlcyB1bmEgbWF0cml6IGRlIDN4NC4KCiMjIEFycmVnbG9zIGRlbnRhZG9zCgotIFRhbWJpw6luIGxsYW1hZG9zICpqYWdnZWQgYXJyYXlzKi4KLSBFcyBiw6FzaWNhbWVudGUgdW4gYXJyZWdsbyBlbiBlbCBjdWFsIHN1cyBlbGVtZW50b3Mgc29uIGFycmVnbG9zLgoKYGBgIGNzaGFycAppbnQgW11bXSA9IGphZ2dlZEFyciA9IG5ldyBpbnRbM11bXTsKYGBgCgo+IFRlbmVtb3MgdW4gYXJyZWdsbyBkZSB1bmEgc29sYSBkaW1lbnNpw7NuLCBjb24gMyBlbGVtZW50b3MsIGxvcyBjdWFsZXMKPiBzb24gYXJyZWdsb3MgZGUgdW5hIHNvbGEgZGltZW5zacOzbi4KCmBgYCBjc2hhcnAKaW50WyBdWyBdIGphZ2dlZEFyciA9IG5ldyBpbnRbIF1bIF0KewogIG5ldyBpbnRbIF0gezEsOCwyLDcsOX0sCiAgbmV3IGludFsgXSB7Miw0LDZ9LAogIG5ldyBpbnRbIF0gezMzLDQyfQp9OwpgYGAKCj4gU2kgcXVlcmVtb3MgdGVuZXIgdmFsb3JlcyBpbmljaWFsZXMsIHBvZGVtb3MgZGVjbGFyYXIgZWwgbWlzbW8gYXJyZWdsbwo+IGRlIGVzdGEgbWFuZXJhLgoKYGBgIGNzaGFycAppbnQgeCA9IGphZ2dlZEFyclsyXVsxXTsgLy80MgpgYGAKCj4gUG9kZW1vcyBhY2NlZGVyIGEgbG9zIGVsZW1lbnRvcyBkZWwgYXJyZWdsbyBkZSBlc3RhIG1hbmVyYS4KCiMjIFByb3BpZWRhZGVzIGRlIGxvcyBhcnJlZ2xvcyB5IG3DqXRvZG9zCgojIyMgUHJvcGllZGFkZXMgZGUgbG9zIGFycmVnbG9zCgotIExhIGNsYXNlIGRlIGBhcnJheWAgbm9zIGRhIGRpc3RpbnRhcyBwcm9waWVkYWRlcyB5IG3DqXRvZG9zIHBhcmEKICB0cmFiYWphciBjb24gZWxsYS4KICAtIFBvciBlamVtcGxvIGxhcyBwcm9waWVkYWRlcyBgTGVuZ3RoYCB5IGBSYW5rYCBub3MgZGVqYW4gc2FiZXIgbGEKICAgIGxvbmdpdHVkIHkgbGFzIGRpbWVuc2lvbmVzIGRlIHVuIGFycmVnbG8gcmVzcGVjdGl2YW1lbnRlLgogIC0gQWxndW5vcyBtw6l0b2RvcyBxdWUgbm9zIGRhIGxhIGNsYXNlIGBhcnJheWAgc29uOiBgTWF4YCwgYE1pbmAsIGBTdW1gCiAgICBxdWUgbm9zIHJldG9ybmFuIGVsIGVsZW1lbnRvIG3DoXhpbW8sIG3DrW5pbW8geSBsYSBzdW1hIGRlIHRvZG9zIGxvcwogICAgZWxlbWVudG9zIHJlc3BlY3RpdmFtZW50ZS4KCiMjIFRyYWJhamFuZG8gY29uIGNhZGVuYXMKCiMjIyBDYWRlbmFzCgotIEVzIGNvbcO6biBwZW5zYXIgZW4gbGFzIGNhZGVuYXMgZGUgY2FyYWN0ZXJlcyBjb21vIHVuIGFycmVnbG8gZGUKICBjYXJhY3RlcmVzLCBwZXJvIGVuIEMjIHNvbiBvYmpldG9zLgotIEN1YW5kbyBjcmVhcyB1bmEgY2FkZW5hIGVuIEMjLCBpbnN0YW5jaWFzIHVuIG9iamV0byBkZSBsYSBjbGFzZQogIGBzdHJpbmdgLgotIFRlbmVtb3MgdW5hcyBjdWFudGFzIHByb3BpZWRhZGVzIHkgbcOpdG9kb3Mgw7p0aWxlcyBwYXJhIHRyYWJhamFyIGNvbgogIGNhZGVuYXMuCiAgLSBgTGVuZ3RoYDogTm9zIHJldG9ybmEgbGEgbG9uZ2l0dWQgZGUgdW5hIGNhZGVuYS4KICAtIGBJbmRleE9mKHZhbHVlKWA6IFJldG9ybmEgZWwgw61uZGljZSBkZWwgbGEgcHJpbWVyYSBvY3VycmVuY2lhIGFsCiAgICB2YWxvciBkYWRvLgogIC0gYEluc2VydChpbmRleCwgdmFsdWUpYDogSW5zZXJ0YSBlbCB2YWxvciBkYWRvIGVuIGxhIHBvc2ljacOzbiBkYWRhLgogIC0gYFJlbW92ZShpbmRleClgOiBSZW11ZXZlIHRvZG9zIGxvcyBjYXJhY3RlcmVzIGRlIGxhIGNhZGVuYSBkZXNkZSBlbAogICAgw61uZGljZSBlc3BlY2lmaWNhZG8uCiAgLSBgU3Vic3RyaW5nKGluZGV4LCBsZW5ndGgpYDogUmV0b3JuYSB1bmEgcG9yY2nDs24gZGUgbGEgY2FkZW5hLCBjb24KICAgIGRlc2RlIGVsIMOtbmRpY2UgeSBwb3IgbGEgbG9uZ2l0dWQgZGFkYS4KICAtIGBDb250YWlucyh2YWx1ZSlgOiBSZXRvcm5hIGBUcnVlYCBzaSBsYSBjYWRlbmEgY29udGllbmUgZWwgdmFsb3IKICAgIGVzcGVjaWZpY2Fkby4KLSBUYW1iacOpbiBwb2RlbW9zIGFjY2VkZXIgYSBsb3MgZWxlbWVudG9zIGRlIHVuYSBjYWRlbmEgcG9yIHN1IMOtbmRpY2UsCiAgY29tbyBzaSBmdWVyYSB1biBhcnJlZ2xvLgoKYGBgIGNzaGFycApzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpCiAgICAgICAgewogICAgICAgICAgICBzdHJpbmcgdGV4dCA9ICJUaGlzIGlzIHNvbWUgdGV4dCBhYm91dCBhIGRvZy4gVGhlIHdvcmQgZG9nIGFwcGVhcnMgaW4gdGhpcyB0ZXh0IGEgbnVtYmVyIG9mIHRpbWVzLiBUaGlzIGlzIHRoZSBlbmQuIjsKICAgICAgICAgICAgdGV4dCA9IHRleHQuUmVwbGFjZSgiZG9nIiwgImNhdCIpOwogICAgICAgICAgICB0ZXh0ID0gdGV4dC5TdWJzdHJpbmcoMCwgdGV4dC5JbmRleE9mKCIuIikrMSk7CgogICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZSh0ZXh0KTsKICAgICAgICB9CmBgYAoKPiBDIyB0aWVuZSBtdWNob3MgbcOpdG9kb3MgcGFyYSB0cmFiYWphciBjb24gY2FkZW5hcy4KCiMgTcOhcyBzb2JyZSBjbGFzZXMKCiMjIERlc3RydWN0b3JlcwoKLSBBc8OtIGNvbW8gbG9zIGNvbnN0cnVjdG9yZXMgc29uIHVzYWRvcyBjdWFuZG8gdW5hIGNsYXNlIGVzIGluc3RhbmNpYWRhCiAgbG9zIGRlc3RydWN0b3JlcyBzb24gdXNhZG9zIGN1YW5kbyB1bmEgY2xhc2UgZXMgZGVzdHJ1aWRhIG8gYm9ycmFkYS4KLSBMb3MgZGVzdHJ1Y3RvcmVzIHRpZW5lcyBsYXMgc2lndWllbnRlcyBjYXJhY3RlcsOtc3RpY2FzOgogIC0gVW5hIGNsYXNlIHNvbG8gcHVlZGUgdGVuZXIgdW4gc29sbyBkZXN0cnVjdG9yLgogIC0gTG9zIGRlc3RydWN0b3JlcyBubyBwdWVkZW4gc2VyIGxsYW1hZG9zLCBzb24gbGxhbWFkb3MKICAgIGF1dG9tw6F0aWNhbWVudGUuCiAgLSBObyB0b21hbiBwYXLDoW1ldHJvcyBvIG1vZGlmaWNhZG9yZXMuCiAgLSBFbCBub21icmUgZGUgZWwgZGVzdHJ1Y3RvciB0aWVuZSBxdWUgc2VyIGVsIG1pc21vIHF1ZSBlbCBkZSBsYSBjbGFzZQogICAgY29uIHVuIGB+YCBhbnRlcyBkZWwgbm9tYnJlLgoKYGBgIGNzaGFycApjbGFzcyBEb2cgewogICAgfkRvZygpCiAgICAgICAgewogICAgICAgICAgICAvL0PDs2RpZ28KICAgICAgICB9Cn0KYGBgCgo+IFNvbiDDunRpbGVzIHBhcmEgbGliZXJhciByZWN1cnNvcyBjdWFuZG8gc2FsZXMgZGVsIHByb2dyYW1hLCBlamVtcGxvcwo+IHB1ZWRlbiBzZXI6IGNlcnJhbmRvIGFyY2hpdm9zLCBsaWJlcmFyIG1lbW9yaWEsIGV0Yy4KCmBgYCBjc2hhcnAKY2xhc3MgRG9nCnsKICAgIHB1YmxpYyBEb2coKSB7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIkNvbnN0cnVjdG9yIik7CiAgICB9CiAgICB+RG9nKCkgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJEZXN0cnVjdG9yIik7CiAgICB9Cn0Kc3RhdGljIHZvaWQgTWFpbihzdHJpbmdbXSBhcmdzKQp7CiAgICBEb2cgZCA9IG5ldyBEb2coKTsKfQpgYGAKCj4gRW4gZXN0ZSBlamVtcGxvLCBjdWFuZG8gaW5zdGFuY2lhbW9zIGVsIG9iamV0byBlbCBwcm9ncmFtYSBpbXByaW1lCj4gIkNvbnN0cnVjdG9yIiB5IGN1YW5kbyBlbCBwcm9ncmFtYSB0ZXJtaW5hLCBlbCBvYmpldG8gZXMgYm9ycmFkbyB5IGVsCj4gZGVzdHJ1Y3RvciBpbXByaW1lICJEZXN0cnVjdG9yIi4KCiMjIE1pZW1icm9zIGVzdMOhdGljb3MKCi0gVG9kb3MgbG9zIG1pZW1icm9zIGRlIHVuYSBjbGFzZSAodmFyaWFibGVzLCBwcm9waWVkYWRlcywgbcOpdG9kb3MpCiAgcHVlZGVuIHNlciBkZWNsYXJhZG9zIGNvbW8gYHN0YXRpY2AgKGVzdMOhdGljb3MpLgogIC0gRXN0byBoYWNlIHF1ZSBsb3MgbWllbWJyb3MgcGVydGVuZXpjYW4gYSBsYSBjbGFzZSBlbiB2ZXogZGUKICAgIHBlcnRlbmVjZXIgYWwgb2JqZXRvIGluZGl2aWR1YWwuCiAgICAtIE5vIGltcG9ydGEgY3VhbnRvcyBvYmpldG9zIGRlIGxhIGNsYXNlIHNvbiBjcmVhZG9zLCBzb2xvIGhheSB1bmEKICAgICAgY29waWEgZGVsIG1pZW1icm8gZXN0w6F0aWNvLgoKYGBgIGNzaGFycApjbGFzcyBDYXQgewogICAgcHVibGljIHN0YXRpYyBpbnQgY291bnQ9MDsKICAgIHB1YmxpYyBDYXQoKSB7CiAgICAgICAgY291bnQrKzsKICAgIH0KfQpgYGAKCj4gTm8gaW1wb3J0YSBjdWFudG9zIG9iamV0b3MgYENhdGAgaW5zdGFuY2llbW9zLCBgY291bnRgIHNpZW1wcmUgc2VyYSBlbAo+IG1pc21vIHBhcmEgdG9kb3MgZXN0b3MuCgotIERlYmlkbyBhIHN1IG5hdHVyYWxlemEgZ2xvYmFsLCBlc3RvcyBtaWVtYnJvcyBwdWVkZW4gc2VyIGFjY2VkaWRvcwogIGRpcmVjdGFtZW50ZSB1c2FuZG8gZWwgbm9tYnJlIGRlIGxhIGNsYXNlLgoKYGBgIGNzaGFycApjbGFzcyBDYXQgewogICAgcHVibGljIHN0YXRpYyBpbnQgY291bnQ9MDsKICAgIHB1YmxpYyBDYXQoKSB7CiAgICAgICAgY291bnQrKzsKICAgIH0KfQpzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpCiAgICB7CiAgICAgICAgQ2F0IGMxID0gbmV3IENhdCgpOwogICAgICAgIENhdCBjMiA9IG5ldyBDYXQoKTsKCiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoQ2F0LmNvdW50KCkpOyAvLyAyCiAgICB9CmBgYAoKPiBFbiBlbCBlamVtcGxvIGFjY2VkZW1vcyBhIGxhIHZhcmlhYmxlIGBjb3VudGAgY29uIGVsIG5vbWJyZSBkZSBsYQo+IGNsYXNlIHkgbm8gZWwgZGUgbGFzIGluc3RhbmNpYXMsIHkgZXN0YSB2YXJpYWJsZSBlcyBsYSBtaXNtYSBlbiB0b2Rhcwo+IGxhcyBpbnN0YW5jaWFzIGRlIGBDYXRgLgoKPiBTZSBkZWJlIGFjY2VkZXIgYSBsb3MgbWllbWJyb3MgZXN0w6F0aWNvcyBjb24gZWwgbm9tYnJlIGRlIGxhIGNsYXNlCj4gc2llbXByZS4KCioqRWwgbWlzbW8gY29uY2VwdG8gc2UgYXBsaWNhIGEgbG9zIG3DqXRvZG9zIGVzdMOhdGljb3MuKioKCmBgYCBjc2hhcnAKY2xhc3MgRG9nIHsKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBCYXJrKCkgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJXb29mIik7CiAgICB9Cn0Kc3RhdGljIHZvaWQgTWFpbihzdHJpbmdbXSBhcmdzKQogICAgewogICAgICAgIERvZy5CYXJrKCk7CiAgICB9CmBgYAoKPiBNw6l0b2RvcyBlc3TDoXRpY29zIHNvbG8gcHVlZGVuIGFjY2VkZXIgYSBtaWVtYnJvcyBlc3TDoXRpY29zLgoKPiBFbCBtw6l0b2RvIGBNYWluYCBlcyBlc3TDoXRpY28sIHkgZXMgZWwgcHVudG8gZGUgZW50cmFkYSBkZSBjdWFscXVpZXIKPiBwcm9ncmFtYSwgZW50b25jZXMgY3VhbHF1aWVyIG3DqXRvZG8gbGxhbWFkbyBkaXJlY3RhbWVudGUgZGVzZGUgZWwgTWFpbgo+IHRpZW5lIHF1ZSBzZXIgZXN0w6F0aWNvLgoKLSBMYXMgY29uc3RhbnRlcyBzb24gZXN0w6F0aWNhcyBwb3IgZGVmaW5pY2nDs24uCgpgYGAgY3NoYXJwCmNsYXNzIE1hdGggewogICAgcHVibGljIGNvbnN0IGludCBPTkUgPSAxOwp9CmBgYAoKIyMjIENvbnN0cnVjdG9yZXMgZXN0w6F0aWNvcwoKLSBMb3MgY29uc3RydWN0b3JlcyBwdWVkZW4gc2VyIGRlY2xhcmFkb3MgZXN0w6F0aWNvcyBwYXJhIGluaWNpYWxpemFyCiAgbWllbWJyb3MgZXN0w6F0aWNvcyBkZSBsYSBjbGFzZS4KCmBgYCBjc2hhcnAKY2xhc3MgU29tZUNsYXNzIHsKICAgIHB1YmxpYyBzdGF0aWMgaW50IHggeyBnZXQ7IHNldDsgfQogICAgcHVibGljIHN0YXRpYyBpbnQgeSB7IGdldDsgc2V0OyB9CgogICAgc3RhdGljIFNvbWVDbGFzcygpIHsKICAgICAgICB4ID0gMTA7CiAgICAgICAgeSA9IDEwOwogICAgfQp9CmBgYAoKPiBFbCBjb25zdHJ1Y3RvciBzZXJhIGxsYW1hZG8gY3VhbmRvIGludGVudGVtb3MgYWNjZWRlciBhIGBTb21lQ2xhc3MuWGAKPiBvIGBTb21lQ2xhc3MuWWAuCgojIyMgQ2xhc2VzIGVzdMOhdGljYXMKCi0gVW5hIGNsYXNlIHB1ZWRlIHNlciBkZWNsYXJhZGEgY29tbyBlc3TDoXRpY2EuCiAgLSBTb2xvIHB1ZWRlIGNvbnRlbmVyIG1pZW1icm9zIGVzdMOhdGljb3MuCi0gTm8gc2UgcHVlZGUgaW5zdGFuY2lhciB1biBvYmpldG8gZGUgdW5hIGNsYXNlIGVzdMOhdGljYSwgeWEgcXVlIHNvbG8KICB1bmEgaW5zdGFuY2lhIHB1ZWRlIGV4aXN0aXIgZW4gZWwgcHJvZ3JhbWEuCi0gU29uIMO6dGlsZXMgcGFyYSBjb21iaW5hciBwcm9waWVkYWRlcyBsw7NnaWNhcyB5IG3DqXRvZG9zLgogIC0gTGEgY2xhc2UgYE1hdGhgIGVzIHVuIGJ1ZW4gZWplbXBsby4KCmBgYCBjc2hhcnAKQ29uc29sZS5Xcml0ZUxpbmUoTWF0aC5Qb3coMiwgMykpOwpgYGAKCj4gUG9kZW1vcyBhY2NlZGVyIGEgbGEgY2xhc2UgYE1hdGhgIHVzYW5kbyBlbCBub21icmUgZGUgbGEgY2xhc2UsIHNpbgo+IGRlY2xhcmFyIHVuIG9iamV0bwoKMS4gIEVqZW1wbG9zCgogICAgTGEgY2xhc2UgYEFycmF5YCB0aWVuZSBhbGd1bm9zIG3DqXRvZG9zIGVzdMOhdGljb3MgcGFyYSBtYW5pcHVsYXIKICAgIGFycmVnbG9zLgoKICAgIGBgYCBjc2hhcnAKICAgIGludFtdIGFyciA9IHsxLCAyLCAzLCA0fTsKCiAgICBBcnJheS5SZXZlcnNlKGFycik7CiAgICAvL2FyciA9IHs0LCAzLCAyLCAxfQoKICAgIEFycmF5LlNvcnQoYXJyKTsKICAgIC8vYXJyID0gezEsIDIsIDMsIDR9CiAgICBgYGAKCiAgICBMYSBjbGFzZSBgU3RyaW5nYCB0YW1iacOpbiBsb3MgdGllbmUuCgogICAgYGBgIGNzaGFycAogICAgc3RyaW5nIHMxID0gInNvbWUgdGV4dCI7CiAgICBzdHJpbmcgczIgPSAiYW5vdGhlciB0ZXh0IjsKCiAgICBTdHJpbmcuQ29uY2F0KHMxLCBzMik7IC8vIGNvbWJpbmVzIHRoZSB0d28gc3RyaW5ncwoKICAgIFN0cmluZy5FcXVhbHMoczEsIHMyKTsgLy8gcmV0dXJucyBmYWxzZQogICAgYGBgCgogICAgPiBMYSBjbGFzZSBgQ29uc29sZWAgVGFtYmnDqW4gZXMgb3RybyBlamVtcGxvIGRlIHVuYSBjbGFzZSBlc3TDoXRpY2EuCgojIyBgVGhpc2AgJiBgcmVhZG9ubHlgCgojIyMgYFRoaXNgCgotIExhIHBhbGFicmEgYFRoaXNgIGVzIHVzYWRhIGRlbnRybyBkZSB1bmEgY2xhc2UgeSBzZSByZWZpZXJlIGEgbGEKICBpbnN0YW5jaWEgYWN0dWFsIGRlIGxhIGNsYXNlLgogIC0gQWwgb2JqZXRvIGFjdHVhbC4KLSBTZSB1c2EgY29tw7pubWVudGUgcGFyYSBkaXN0aW5ndWlyIGxvcyBtaWVtYnJvcyBkZSBsYSBjbGFzZSBkZSBvdHJvcwogIGRhdG9zIGNvbW8uCiAgLSBQYXLDoW1ldHJvcyBsb2NhbGVzIG8gZm9ybWFsZXMgZGUgdW4gbcOpdG9kby4KCmBgYCBjc2hhcnAKY2xhc3MgUGVyc29uIHsKICAgIHByaXZhdGUgc3RyaW5nIG5hbWU7CiAgICBwdWJsaWMgUGVyc29uKHN0cmluZyBuYW1lKSB7CiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgIH0KfQpgYGAKCj4gQXF1w60sIGB0aGlzLm5hbWVgIHJlcHJlc2VudGEgZWwgbWllbWJybyBkZSBsYSBjbGFzZSB5IGBuYW1lYCBlbCBub21icmUKPiBlbCBwYXLDoW1ldHJvIGRlbCBjb25zdHJ1Y3Rvci4KCj4gT3RybyB1c28gY29tw7puIGRlIGB0aGlzYCBlcyBwYXJhIHBhc2FyIGxhIGluc3RhbmNpYSBhY3R1YWwgYSB1biBtw6l0b2RvCj4gY29tbyB1biBwYXLDoW1ldHJvOiBgU2hvd1BlcnNvbkluZm8odGhpcyk7YAoKIyMjIEVsIG1vZGlmaWNhZG9yIGByZWFkb25seWAKCi0gUHJldmllbmUgcXVlIHVuIG1pZW1icm8gZGUgdW5hIGNsYXNlIHNlYSBtb2RpZmljYWRvIGRlc3B1w6lzIGRlIGxhCiAgY29uc3RydWNjacOzbi4KICAtIEVzdG8gc2lnbmlmaWNhIHF1ZSBzb2xvIHB1ZWRlIHNlciBtb2RpZmljYWRvIGN1YW5kbyBsbyBkZWNsYXJhcwogICAgZGVzZGUgdW4gY29uc3RydWN0b3IuCgpgYGAgY3NoYXJwCmNsYXNzIFBlcnNvbiB7CiAgICBwcml2YXRlIHJlYWRvbmx5IHN0cmluZyBuYW1lID0gIkpvaG4iOwogICAgcHVibGljIFBlcnNvbihzdHJpbmcgbmFtZSkgewogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICB9Cn0KYGBgCgo+IFNpIGludGVudGFtb3MgbW9kaWZpY2FyIGVsIGNhbXBvIGBuYW1lYCBlbiBhbGfDum4gb3RybyBsdWdhciB0ZW5kcmVtb3MKPiB1biBlcnJvci4KCi0gYHJlYWRvbmx5YCB5IGBjb25zdGAgc29uIHBhcmVjaWRvcyBwZXJvIHRpZW5lbiBjaWVydGFzIGRpZmVyZW5jaWFzLgogIC0gVW5hIGNhbXBvIGBjb25zdGAgZGViZSBkZSBzZXIgaW5pY2lhbGl6YWRvIGNvbiB1biB2YWxvciB5IGByZWFkb25seWAKICAgIG5vLgogIC0gVW4gY2FtcG8gYHJlYWRvbmx5YCBwdWVkZSBzZXIgY2FtYmlhZG8gZW4gdW4gY29uc3RydWN0b3IsIGVsIGBjb25zdGAKICAgIG5vLgogIC0gVW4gY2FtcG8gYHJlYWRvbmx5YCBwdWVkZSBzZXIgYXNpZ25hZG8gYSB1biB2YWxvciBxdWUgZXMgZWwKICAgIHJlc3VsdGFkbyBkZSB1biBjYWxjdWxvLCBgY29uc3RgIG5vLgoKIyMgSW5kZXhhZG9yZXMKCi0gUGVybWl0ZW4gYSBvYmpldG9zIHNlciBpbmRleGFkb3MgY29tbyBzaSBmdWVyYW4gdW4gYXJyZWdsby4KLSBVbiBlamVtcGxvIGVzIGxhIGNsYXNlIGBTdHJpbmdgLCBsYSBjdWFsIGVzIHVuIGFycmVnbG8gZGUgb2JqZXRvcyB0aXBvCiAgYENoYXJgIGltcGxlbWVudGFuZG8gdW4gaW5kZXhhZG9yZXMgcGFyYSBxdWUgcG9kYW1vcyBhY2NlZGVyIGEgbG9zCiAgZWxlbWVudG9zLgoKYGBgIGNzaGFycApzdHJpbmcgc3RyID0gIkhlbGxvIFdvcmxkIjsKY2hhciB4ID0gc3RyWzRdOwpDb25zb2xlLldyaXRlTGluZSh4KTsKYGBgCgotIExhIGRlY2xhcmFjacOzbiBkZSB1biBpbmRleGFkb3IgZXMgc2ltaWxhciBhIHVuYSBwcm9waWVkYWQuCgpgYGAgY3NoYXJwCmNsYXNzIENsaWVudHMgewogICAgcHJpdmF0ZSBzdHJpbmdbXSBuYW1lcyA9IG5ldyBzdHJpbmdbMTBdOwoKICAgIHB1YmxpYyBzdHJpbmcgdGhpc1tpbnQgaW5kZXhdIHsKICAgICAgICBnZXQgewogICAgICAgICAgICByZXR1cm4gbmFtZXNbaW5kZXhdOwogICAgICAgIH0KICAgICAgICBzZXQgewogICAgICAgICAgICBuYW1lc1tpbmRleF0gPSB2YWx1ZTsKICAgICAgICB9CiAgICB9Cn0KYGBgCgotIFRvZG9zIGxvcyBpbmRleGFkb3JlcyBuZWNlc2l0YW4gdW4gw61uZGljZS4KLSBTZSB1c2FuIGBnZXRgIHkgYHNldGAgcGFyYSBkZWZpbmlyIHVuIGluZGV4YWRvci4KICAtIExhIGRpZmVyZW5jaWEgZXMgcXVlIGxvcyBpbmRleGFkb3JlcyByZXRvcm5hbiBvIHBvbmVuIHVuIHZhbG9yCiAgICBwYXJ0aWN1bGFyIGRlIGxhIGluc3RhbmNpYSBkZWwgb2JqZXRvLgotIFNvbiBkZWZpbmlkb3MgY29uIGxhIHBhbGFicmEgYHRoaXNgLgogIC0gRXN0byBwYXJhIG9idGVuZXIgbyBwb25lciBlbCBlbGVtZW50byBkZSBsYSBpbnN0YW5jaWEuCgpgYGAgY3NoYXJwCkNsaWVudHMgYyA9IG5ldyBDbGllbnRzKCk7CmNbMF0gPSAiRGF2ZSI7CmNbMV0gPSAiQm9iIjsKCkNvbnNvbGUuV3JpdGVMaW5lKGNbMV0pOwpgYGAKCj4gU2UgdXNhbiBpbmRleGFkb3JlcyB0w61waWNhbWVudGUgc2kgbGEgY2xhc2UgcmVwcmVzZW50YSB1bmEgbGlzdGEsCj4gY29sZWNjacOzbiBvIHVuIGFycmVnbG8gZGUgb2JqZXRvcy4KCiMjIFNvYnJlY2FyZ2EgZGUgT3BlcmFkb3JlcwoKLSBMYSBtYXlvcsOtYSBkZSBsb3Mgb3BlcmFkb3JlcyBlbiBDIyBwdWVkZSBzZXIgc29icmVjYXJnYWRvcy4KICAtIEVzdG8gc2lnbmlmaWNhIHF1ZSBwdWVkZW4gc2VyIHJlZGVmaW5pZG9zIHBhcmEgcXVlIGhhZ2FuIG90cmFzCiAgICBjb3Nhcy4KLSBQb3IgZWplbXBsbywgcG9kZW1vcyByZWRlZmluaXIgZWwgY29tcG9ydGFtaWVudG8gZGUgYCtgIGVuIHVuYSBjbGFzZS4KCmBgYCBjc2hhcnAKY2xhc3MgQm94IHsKICAgIHB1YmxpYyBpbnQgSGVpZ2h0IHtnZXQ7IHNldDt9CiAgICBwdWJsaWMgaW50IFdpZHRoIHtnZXQ7IHNldDt9CiAgICBwdWJsaWMgQm94KGludCBoLCBpbnQgdykgewogICAgICAgIEhlaWdodCA9IGg7CiAgICAgICAgV2lkdGggPSB3OwogICAgfQp9CnN0YXRpYyB2b2lkIE1haW4oc3RyaW5nW10gYXJncykgewogICAgQm94IGIxID0gbmV3IEJveCgxNCwgMyk7CiAgICBCb3ggYjIgPSBuZXcgQm94KDUsIDcpOwp9CmBgYAoKVGVuaWVuZG8gZG9zIG9iamV0b3MgdGlwbyBgQm94YCBzaSBxdWlzacOpcmFtb3Mgc3VtYXJsb3MgcGFyYSB0ZW5lciB1bgpvYmpldG8gYEJveGAgbcOhcyBncmFuZGUgaGFyw61hbW9zLgoKYGBgIGNzaGFycApCb3ggYjMgPSBiMSArIGIyOwpgYGAKCj4gRXN0ZSBjb21wb3J0YW1pZW50byBsbyBsb2dyYXLDrWFtb3MgYSB0cmF2w6lzIGRlIGxhIHNvYnJlY2FyZ2EgZGUKPiBvcGVyYWRvcmVzLgoKLSBTb24gbcOpdG9kb3MgY29uIG5vbWJyZXMgZXNwZWNpYWxlcywgZG9uZGUgbGEgcGFsYWJyYSBgb3BlcmF0b3JgIHZhCiAgYW50ZXMgcXVlIGVsIG9wZXJhZG9yIGEgZGVmaW5pci4KLSBTaW1pbGFyIGEgY3VhbHF1aWVyIG90cm8gbcOpdG9kbywgdGllbmVuIHRpcG9zIGRlIHJldG9ybm8geSB1bmEgbGlzdGEKICBkZSBwYXLDoW1ldHJvcy4KCmBgYCBjc2hhcnAKcHVibGljIHN0YXRpYyBCb3ggb3BlcmF0b3IrIChCb3ggYSwgQm94IGIpIHsKICAgIGludCBoID0gYS5IZWlnaHQgKyBiLkhlaWdodDsKICAgIGludCB3ID0gYS5XaWR0aCArIGIuV2lkdGg7CiAgICBCb3ggcmVzID0gbmV3IEJveChoLCB3KTsKICAgIHJldHVybiByZXM7Cn0KYGBgCgo+IEVuIGVsIGVqZW1wbG8gZXN0YW1vcyBzb2JyZWNhcmdhbmRvIGVsIG9wZXJhZG9yIGArYCBwYXJhIG9iamV0b3MgZGUKPiBudWVzdHJhIGNsYXNlIGBCb3hgLgoKPiBUb2RvcyBsb3Mgb3BlcmFkb3JlcyBzb2JyZWNhcmdhZG9zIGRlYmVuIHNlciBlc3TDoXRpY29zLgoKYGBgIGNzaGFycApjbGFzcyBCb3ggewogICAgcHVibGljIGludCBIZWlnaHQgeyBnZXQ7IHNldDsgfQogICAgcHVibGljIGludCBXaWR0aCB7IGdldDsgc2V0OyB9CiAgICBwdWJsaWMgQm94KGludCBoLCBpbnQgdykgewogICAgICAgIEhlaWdodCA9IGg7CiAgICAgICAgV2lkdGggPSB3OwogICAgfQogICAgcHVibGljIHN0YXRpYyBCb3ggb3BlcmF0b3IrKEJveCBhLCBCb3ggYikgewogICAgICAgIGludCBoID0gYS5IZWlnaHQgKyBiLkhlaWdodDsKICAgICAgICBpbnQgdyA9IGEuV2lkdGggKyBiLldpZHRoOwogICAgICAgIEJveCByZXMgPSBuZXcgQm94KGgsIHcpOwogICAgICAgIHJldHVybiByZXM7CiAgICB9Cn0KCnN0YXRpYyB2b2lkIE1haW4oc3RyaW5nW10gYXJncykKewogICAgQm94IGIxID0gbmV3IEJveCgxNCwgMyk7CiAgICBCb3ggYjIgPSBuZXcgQm94KDUsIDcpOwogICAgQm94IGIzID0gYjEgKyBiMjsKCiAgICBDb25zb2xlLldyaXRlTGluZShiMy5IZWlnaHQpOy8vIDE5CiAgICBDb25zb2xlLldyaXRlTGluZShiMy5XaWR0aCk7Ly8gMTAKfQpgYGAKCj4gUG9kZW1vcyBzb2JyZWNhcmdhciB0b2RvcyBsb3Mgb3BlcmFkb3JlcyBhcml0bcOpdGljb3MgeSBkZSBjb21wYXJhY2nDs24uCgojIEhlcmVuY2lhIHkgcG9saW1vcmZpc21vCgojIyBIZXJlbmNpYQoKLSBOb3MgcGVybWl0ZSBkZWZpbmlyIHVuYSBjbGFzZSBiYXNhZGEgZW4gb3RyYSBjbGFzZS4KLSBMYSBjbGFzZSBxdWUgaGVyZWRhIHN1cyBwcm9waWVkYWRlcyBhIG90cmEgZXMgbGxhbWFkYSAqKmNsYXNlIGJhc2UqKi4KICAtIExhIGNsYXNlIGEgbGEgcXVlIHNlIGhlcmVkYSBlcyBsbGFtYWRhICoqY2xhc2UgZGVyaXZhZGEqKi4KLSBQb2RlbW9zIGRlZmluaXIgdW5hIGNsYXNlIGBBbmltYWxgIGNvbiBjaWVydGFzIHByb3BpZWRhZGVzIHkgdXNhcmxhCiAgcGFyYSBjb25zdHJ1aXIgbGFzIGNsYXNlcyBgUGVycm9gIHkgYEdhdG9gLgogIC0gRXN0YXMgaGVyZWRhbiB0b2RhcyBsYXMgcHJvcGllZGFkZXMgZGUgbGEgY2xhc2UgYW5pbWFsIHkgcHVlZGVuCiAgICB0ZW5lciBzdXMgcHJvcGlhcyBwcm9waWVkYWRlcy4KCmBgYCBjc2hhcnAKY2xhc3MgQW5pbWFsIHsKICAgIHB1YmxpYyBpbnQgTGVncyB7Z2V0OyBzZXQ7fQogICAgcHVibGljIGludCBBZ2Uge2dldDsgc2V0O30KfQpgYGAKCj4gUG9kZW1vcyB0ZW5lciBudWVzdHJhIGNsYXNlIGBBbmltYWxgIHF1ZSBzZXLDoSBudWVzdHJhIGNsYXNlIGJhc2UuCgpgYGAgY3NoYXJwCmNsYXNzIERvZyA6IEFuaW1hbCB7CiAgICBwdWJsaWMgRG9nKCkgewogICAgICAgIExlZ3MgPSA0OwogICAgfQogICAgcHVibGljIHZvaWQgQmFyaygpIHsKICAgICAgICBDb25zb2xlLldyaXRlKCJXb29mIik7CiAgICB9Cn0KYGBgCgo+IFkgY29uIGVsbGEgY3JlYXIgbnVlc3RyYSBjbGFzZSBgRG9nYCwgdXNhbmRvIHN1cyBtaWVtYnJvcyB5IGFncmVnYW5kbwo+IHVub3MgcHJvcGlvcyBkZSBsYSBjbGFzZSBudWV2YS4KCi0gRGViZW1vcyBkZWZpbmlyIGxhIGNsYXNlIHkgY29uIGRvcyBwdW50b3MgZGVzcHXDqXMgZGVsIG5vbWJyZSBkZWZpbmlyCiAgbGEgY2xhc2UgYmFzZSBkZSBudWVzdHJhIGNsYXNlLgotIFRvZG9zIGxvcyBtaWVtYnJvcyBww7pibGljb3MgZGUgbGEgY2xhc2UgYEFuaW1hbGAgc2UgdnVlbHZlbiBtaWVtYnJvcwogIHDDumJsaWNvcyBkZSBsYSBjbGFzZSBgRG9nYCwgaW5jbHV5ZW5kbyBtw6l0b2Rvcy4KCmBgYCBjc2hhcnAKc3RhdGljIHZvaWQgTWFpbihzdHJpbmdbXSBhcmdzKQogICAgewogICAgICAgIERvZyBkID0gbmV3IERvZygpOwogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKGQubGVncyk7IC8vIDQKICAgICAgICBkLkJhcmsoKTsKICAgIH0KYGBgCgo+IEVzdG8gbm9zIHBlcm1pdGUgcmVodXNhciBjw7NkaWdvIHlhIGVzY3JpdG8gc2luIG5lY2VzaWRhZCBkZSByZWVzY3JpYmlyLgoKPiBDIyBubyBzb3BvcnRhIGhlcmVuY2lhIG3Dumx0aXBsZSwgYXNpIHF1ZSBubyBwdWVkZXMgaGVyZWRhciBkZSB2YXJpYXMKPiBjbGFzZXMgYWwgbWlzbW8gdGllbXBvLgo+Cj4gU2luIGVtYmFyZ28sIHB1ZWRlcyB1c2FyICoqaW50ZXJmYWNlcyoqIHBhcmEgaW1wbGVtZW50YXIgaGVyZW5jaWEKPiBtw7psdGlwbGUuCgojIyBNaWVtYnJvcyBwcm90ZWdpZG9zCgotIEVsIG1vZGlmaWNhZG9yIGBwcm90ZWN0ZWRgIGVzIHBhcmVjaWRvIGEgYHByaXZhdGVgLgogIC0gTGEgZGlmZXJlbmNpYSBlcyBxdWUgYHByb3RlY3RlZGAgcHVlZGUgc2VyIGFjY2VkaWRvIGRlc2RlIGxhcyBjbGFzZXMKICAgIGRlcml2YWRhcy4KCmBgYCBjc2hhcnAKY2xhc3MgUGVyc29uIHsKICAgIHByb3RlY3RlZCBpbnQgQWdlIHtnZXQ7IHNldDt9CiAgICBwcm90ZWN0ZWQgc3RyaW5nIE5hbWUge2dldDsgc2V0O30KfQoKY2xhc3MgU3R1ZGVudCA6IFBlcnNvbiB7CiAgICBwdWJsaWMgU3R1ZGVudChzdHJpbmcgbm0pIHsKICAgICAgICBOYW1lID0gbm07CiAgICB9CiAgICBwdWJsaWMgdm9pZCBTcGVhaygpIHsKICAgICAgICBDb25zb2xlLldyaXRlKCJOYW1lOiAiICsgTmFtZSk7CiAgICB9Cn0KCnN0YXRpYyB2b2lkIE1haW4oc3RyaW5nW10gYXJncykKewogICAgU3R1ZGVudCBzID0gbmV3IFN0dWRlbnQoIkRhdmlkIik7CiAgICBzLlNwZWFrKCk7IC8vIE5hbWU6IERhdmlkCn0KYGBgCgo+IEVuIGVsIGVqZW1wbG8gcG9kZW1vcyBhY2NlZGVyIHkgbW9kaWZpY2FyIGxhIHByb3BpZWRhZCBgbmFtZWAsIGRlc2RlCj4gbGEgY2xhc2UgZGVyaXZhZGEuCgpgYGAgY3NoYXJwCnN0YXRpYyB2b2lkIE1haW4oc3RyaW5nW10gYXJncykKewogICAgU3R1ZGVudCBzID0gbmV3IFN0dWRlbnQoIkRhdmlkIik7CiAgICBzLk5hbWUgPSAiQm9iIjsgLy8gRXJyb3IhCn0KYGBgCgo+IFNpIGludGVudGFtb3MgYWNjZWRlciBhIGVsbGEgZGVzZGUgYWZ1ZXJhIGRlIGxhIGNsYXNlIG9idGVuZHJlbW9zIHVuCj4gZXJyb3IuCgojIyBTZWxsYWRvCgotIFBvZGVtb3MgcHJldmVuaXIgYSBsYXMgY2xhc2VzIGRlIGhlcmVkYXIgc3VzIG1pZW1icm9zIHVzYW5kbyBlbAogIG1vZGlmaWNhZG9yIGBzZWFsZWRgLgoKYGBgIGNzaGFycApzZWFsZWQgY2xhc3MgQW5pbWFsIHsKICAgIC8vc29tZSBjb2RlCn0KY2xhc3MgRG9nIDogQW5pbWFsIHsgfSAvL0Vycm9yCgpzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpCnsKCn0KYGBgCgojIyBDb25zdHJ1Y3RvciB5IGRlc3RydWN0b3IgZGUgbGEgY2xhc2UgZGVyaXZhZGEuCgotIENhZGEgcXVlIHNlIGluc3RhbmNpYSB1biBvYmpldG8gc2UgbGxhbWEgYSBzdSBjb25zdHJ1Y3RvciB5IGNhZGEgcXVlCiAgc2UgZGVzdHJ1eWUgc2UgbGxhbWEgYSBzdSBkZXN0cnVjdG9yLgotIENvbiBsYSBoZXJlbmNpYSwgbGEgY2xhc2UgaGVyZWRhZGEgbm8gaGVyZWRhIGVsIGNvbnN0cnVjdG9yIHkgZWwKICBkZXN0cnVjdG9yIGRlIGxhIGNsYXNlIGJhc2UuCiAgLSBBc8OtIHF1ZSBkZWJlcyBkZWZpbmlyIHNpZW1wcmUgdW5vcyBudWV2b3MgY2FkYSBxdWUgY3JlYXMgdW5hIGNsYXNlCiAgICBoZXJlZGFkYQoKYGBgIGNzaGFycApjbGFzcyBBbmltYWwgewogICAgcHVibGljIEFuaW1hbCgpIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiQW5pbWFsIGNyZWF0ZWQiKTsKICAgIH0KICAgIH5BbmltYWwoKSB7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIkFuaW1hbCBkZWxldGVkIik7CiAgICB9Cn0KCmNsYXNzIERvZzogQW5pbWFsIHsKICAgIHB1YmxpYyBEb2coKSB7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIkRvZyBjcmVhdGVkIDpEIik7CiAgICB9CiAgICB+RG9nKCkgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJEb2cgZGVsZXRlZCA6YyIpOwogICAgfQp9CgpzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpCnsKICAgIERvZyBkID0gbmV3IERvZygpOwp9Ci8vIFJlc3VsdGFuZG8gZW46Ci8vQW5pbWFsIGNyZWF0ZWQKLy9Eb2cgY3JlYXRlZAovL0RvZyBkZWxldGVkCi8vQW5pbWFsIGRlbGV0ZWQKYGBgCgo+IEN1YW5kbyBzZSBjcmVhIGVsIG9iamV0byBgRG9nYCBsbGFtYW1vcyBwcmltZXJvIGEgZWwgY29uc3RydWN0b3IgZGUgbGEKPiBjbGFzZSBgQW5pbWFsYCB5IGRlc3B1w6lzIGFsIGRlIGxhIGNsYXNlIGBEb2dgLCB5IGNvbiBsb3MgZGVzdHJ1Y3RvcmVzCj4gcGFzYSBsbyBtaXNtby4KCiMjIFBvbGltb3JmaXNtbwoKLSBMYSBwYWxhYnJhIHNpZ25pZmljYSAiVGVuZXIgbXVjaGFzIGZvcm1hcyIuCi0gU2lnbmlmaWNhIHF1ZSB1biBtw6l0b2RvIHB1ZWRlIHRlbmVyIG11Y2hhcyBpbXBsZW1lbnRhY2lvbmVzCiAgZGlmZXJlbnRlcy4KLSBTdXBvbmllbmRvIHF1ZSBudWVzdHJvIHByb2dyYW1hIHRpZW5lIHVuIG3DqXRvZG8gYERyYXdgLCB5IHF1ZQogIG5lY2VzaXRhbW9zIGRpYnVqYXIgbXVjaGFzIGZvcm1hcyBkaWZlcmVudGVzLgogIC0gUG9kZW1vcyB1c2FyIHBvbGltb3JmaXNtbyBwYXJhIGxsYW1hciBhbCBtw6l0b2RvIGBEcmF3YCBjb3JyZWN0byBkZQogICAgY3VhbHF1aWVyIGNsYXNlIGRlcml2YWRhLgogIC0gRXN0b3MgbcOpdG9kb3MgZGViZW4gZGUgbGxldmFyIGxhIHBhbGFicmEgYHZpcnR1YWxgIGVuIGxhIGNsYXNlIGJhc2UuCgpgYGAgY3NoYXJwCmNsYXNzIFNoYXBlIHsKICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgRHJhdygpIHsKICAgICAgICBDb25zb2xlLldyaXRlKCJCYXNlIERyYXciKTsKICAgIH0KfQpgYGAKCj4gTGEgcGFsYWJyYSBgdmlydHVhbGAsIHBlcm1pdGUgYWwgbcOpdG9kbyBzZXIgc29icmUgZXNjcml0byBlbiBsYSBjbGFzZQo+IGRlcml2YWRhLgoKPiBMb3MgbcOpdG9kb3MgdmlydHVhbGVzIG5vcyBwZXJtaXRlbiB0cmFiYWphciBjb24gZ3J1cG9zIGRlIG9iamV0b3MKPiByZWxhY2lvbmFkb3MgZW4gdW5hIG1hbmVyYSB1bmlmb3JtZS4KCmBgYCBjc2hhcnAKY2xhc3MgQ2lyY2xlIDogU2hhcGUgewogICAgcHVibGljIG92ZXJyaWRlIHZvaWQgRHJhdygpIHsgLy8gPC0tIExsZXZhbiBsYSBwYWxhYnJhIG92ZXJyaWRlIGVuIGxhIGNsYXNlIGRlcml2YWRhLgogICAgICAgIC8vIGRyYXcgYSBjaXJjbGUuLi4KICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiQ2lyY2xlIERyYXciKTsKICAgIH0KfQpjbGFzcyBSZWN0YW5nbGUgOiBTaGFwZSB7CiAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBEcmF3KCkgewogICAgICAgIC8vIGRyYXcgYSByZWN0YW5nbGUuLi4KICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiUmVjdCBEcmF3Iik7CiAgICB9Cn0KYGBgCgo+IEFob3JhIHBvZGVtb3MgdXNhciBlbCBtw6l0b2RvIHBhcmEgc29icmUgZXNjcmliaXJsbyB5IGFkZWN1YXJsbyBhIGxvCj4gcXVlIG5lY2VzaXRhbW9zLgoKYGBgIGNzaGFycApzdGF0aWMgdm9pZCBtYWluKHN0cmluZ1tdIGFyZ3MpCiAgICB7CiAgICAgICAgU2hhcGUgYyA9IG5ldyBDaXJjbGUoKTsKICAgICAgICBjLkRyYXcoKTsKCiAgICAgICAgU2hhcGUgciA9IG5ldyBSZWN0YW5nbGUoKTsKICAgICAgICByLkRyYXcoKTsKICAgIH0KYGBgCgo+IENhZGEgaW5zdGFuY2lhIGxsYW1hIGEgc3UgcHJvcGlvIG3DqXRvZG8gYERyYXdgIGdyYWNpYXMgYWwKPiBwb2xpbW9yZmlzbW8uCgpQYXJhIHJlc3VtaXIsIGVsIHBvbGltb3JmaXNtbyBlcyB1bmEgbWFuZXJhIGRlIGxsYW1hciBhbCBtaXNtbyBtw6l0b2RvCnBhcmEgZGlmZXJlbnRlcyBvYmpldG9zIHkgZ2VuZXJhciByZXN1bHRhZG9zIGRpZmVyZW50ZXMgYmFzYWRvcyBlbiBlbAp0aXBvIGRlIG9iamV0bywgZXN0byBzZSBsb2dyYSBtZWRpYW50ZSBtw6l0b2RvcyB2aXJ0dWFsZXMgZW4gbGEgY2xhc2UKYmFzZS4KClBhcmEgaW1wbGVtZW50YXIgZXN0bywgY3JlYW1vcyBvYmpldG9zIGRlbCB0aXBvIGRlIGxhIGNsYXNlIGJhc2UgcGVybwpsb3MgaW5zdGFuY2lhbW9zIGNvbiBlbCB0aXBvIGRlIGxhIGNsYXNlIGRlcml2YWRhLgoKYGBgIGNzaGFycApTaGFwZSBjID0gbmV3IENpcmNsZSgpOwpgYGAKClBvZHLDrWFtb3Mgc29sbyBpbnN0YW5jaWFyIGNhZGEgb2JqZXRvIGNvbiBzdSB0aXBvIHkgbGxhbWFyIGEgc3UgbcOpdG9kbwp0YW1iacOpbi4KCmBgYCBjc2hhcnAKQ2lyY2xlIGMgPSBuZXcgQ2lyY2xlKCk7CmMuRHJhdygpOwpgYGAKClBlcm8sIGhhY2VybG8gY29uIHBvbGltb3JmaXNtbyBub3MgdHJhZSBhbGd1bmFzIHZlbnRhamFzLgoKLSBOb3MgcGVybWl0ZSB0cmF0YXIgYSBsb3Mgb2JqZXRvcyBkZSBsYSBtaXNtYSBtYW5lcmEuCiAgLSBEZWJpZG8gYSBxdWUgdG9kb3Mgc29uIG9iamV0b3MgdGlwbyBgU2hhcGVgLCBlcyBtw6FzIGbDoWNpbAogICAgbWFudGVuZXJsb3MgeSB0cmFiYWphciBjb24gZWxsb3MuCgojIyBDbGFzZXMgYWJzdHJhY3RhcwoKLSBBc8OtIGNvbW8gZWwgcG9saW1vcmZpc21vIGVzIGxvZ3JhZG8gY29uIG3DqXRvZG9zIHZpcnR1YWxlcyBxdWUgc29uCiAgYG92ZXJyaWRkZW5gIGVuIGxhIGNsYXNlIGRlcml2YWRhLgotIEVuIGFsZ3VuYXMgc2l0dWFjaW9uZXMgbm8gZXMgbmVjZXNhcmlvIHF1ZSBlbCBtw6l0b2RvIHZpcnR1YWwgdGVuZ2EgdW5hCiAgZGVmaW5pY2nDs24gc2VwYXJhZGEgZGUgbGEgY2xhc2UgYmFzZS4KLSBFc3RvcyBtw6l0b2RvcyBzb24gZGVmaW5pZG9zIHVzYW5kbyBsYSBwYWxhYnJhIGBhYnN0cmFjdGAuCiAgLSBDb24gZXN0byBzZSBlc3BlY2lmaWNhIHF1ZSBsYXMgY2xhc2VzIGRlcml2YWRhcyBkZWJlbiBkZWZpbmlyIGVzZQogICAgbcOpdG9kbyBwb3Igc3UgY3VlbnRhLgogICAgLSBObyBwdWVkZXMgY3JlYXIgb2JqZXRvcyBkZSB1bmEgY2xhc2UgcXVlIHRpZW5lIG3DqXRvZG9zIGFic3RyYWN0b3MsCiAgICAgIHBvciBlc2EgbWlzbWEgcmF6w7NuLCBsYSBjbGFzZSBtaXNtYSBkZWJlIGRlIHNlciBhYnN0cmFjdGEuCgpgYGAgY3NoYXJwCmFic3RyYWN0IGNsYXNzIFNoYXBlIHsKICAgIHB1YmxpYyBhYnN0cmFjdCB2b2lkIERyYXcoKTsKfQpgYGAKCi0gRWwgbcOpdG9kbyBgRHJhd2AgZXMgYWJzdHJhY3RvLCBlbnRvbmNlcyBubyB0aWVuZSBjdWVycG8sIG5vIGxvCiAgbmVjZXNpdGEgcHVlZGVzIHRlcm1pbmFyIGxhIGxpbmVhIGNvbiB1biBgO2AuCi0gWSBsYSBjbGFzZSBkZWJlIGRlIHNlciBhYnN0cmFjdGEgcG9ycXVlIHRpZW5lIHVuIG3DqXRvZG8gYWJzdHJhY3RvLgoKVW5hIGNsYXNlIGFic3RyYWN0YSBzZSBoYWNlIHBhcmEgc2VyIGxhIGJhc2UgZGUgb3RyYXMgY2xhc2VzLCBhY3TDumEgY29tbwp1bmEgcGxhbnRpbGxhIHBhcmEgb3RyYXMgY2xhc2VzLgoKYGBgIGNzaGFycAphYnN0cmFjdCBjbGFzcyBTaGFwZSB7CiAgICBwdWJsaWMgYWJzdHJhY3Qgdm9pZCBEcmF3KCk7Cn0KY2xhc3MgQ2lyY2xlIDogU2hhcGUgewogICAgcHVibGljIG92ZXJyaWRlIHZvaWQgRHJhdygpIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiQ2lyY2xlIERyYXciKTsKICAgIH0KfQpjbGFzcyBSZWN0YW5nbGUgOiBTaGFwZSB7CiAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBEcmF3KCkgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJSZWN0IERyYXciKTsKICAgIH0KfQpzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpCnsKICAgIFNoYXBlIGMgPSBuZXcgQ2lyY2xlKCk7CiAgICBjLkRyYXcoKTsgLy8gQ2lyY2xlIERyYXcKfQpgYGAKCj4gQWhvcmEgdGVuaWVuZG8gbGEgY2xhc2UgYWJzdHJhY3RhLCBwb2RlbW9zIHVzYXJsYSB5IGRlZmluaXIgc3UgcHJvcGlvCj4gbcOpdG9kbyBgRHJhd2AuCgotIExhcyBjbGFzZXMgYWJzdHJhY3RhcyB0aWVuZW4gbGFzIHNpZ3VpZW50ZXMgY2FyYWN0ZXLDrXN0aWNhczoKICAtIE5vIHB1ZWRlbiBzZXIgaW5zdGFuY2lhZGFzLgogIC0gUHVlZGUgY29udGVuZXIgbcOpdG9kb3MgYWJzdHJhY3RvcyB5IGBhY2Nlc3NvcnNgLgogIC0gVW5hIGNsYXNlIG5vIGFic3RyYWN0YSBkZXJyaWJhZGEgZGUgdW5hIGNsYXNlIGFic3RyYWN0YSBkZWJlIGRlCiAgICBpbXBsZW1lbnRhY2lvbmVzIGRlIHRvZG9zIGxvcyBtaWVtYnJvcyBoZXJlZGFkb3MuCgo+IE5vIGVzIHBvc2libGUgbW9kaWZpY2FyIHVuYSBjbGFzZSBhYnN0cmFjdGEgY29uIGxhIHBhbGFicmEgYHNlYWxlZGAsCj4gcG9ycXVlIHNvbiBjb250cmFyaW9zLgo+Cj4gRWwgbW9kaWZpY2Fkb3IgYHNlYWxlZGAgcHJldmllbmUgdW5hIGNsYXNlIGRlIHNlciBoZXJlZGFkYSB5IGVsCj4gbW9kaWZpY2Fkb3IgYGFic3RyYWN0YCByZXF1aWVyZSBxdWUgdW5hIGNsYXNlIHNlYSBoZXJlZGFkYS4KCiMjIEludGVyZmFjZXMKCi0gVW5hIGludGVyZmF6IGVzIHVuYSBjbGFzZSBjb21wbGV0YW1lbnRlIGFic3RyYWN0YSwgcXVlIGNvbnRpZW5lCiAgKipzb2xvKiogbWllbWJyb3MgYWJzdHJhY3Rvcy4KLSBFcyBkZWNsYXJhZGEgdXNhbmRvIGxhIHBhbGFicmEgYGludGVyZmFjZWAuCgpgYGAgY3NoYXJwCnB1YmxpYyBpbnRlcmZhY2UgSVNoYXBlIHsKICAgIHZvaWQgRHJhdygpOwp9CmBgYAoKLSBUb2RvcyBsb3MgbWllbWJyb3MgZGUgbGEgaW50ZXJmYXogc29uIGFic3RyYWN0b3MgcG9yIGRlZmVjdG8sIGFzw60gcXVlCiAgbm8gaGF5IG5lY2VzaWRhZCBkZSBwb25lciBsYSBwYWxhYnJhLgotIExhcyBpbnRlcmZhY2VzIHNvbiBww7pibGljYXMgKHBvciBkZWZlY3RvKSwgcGVybyBwdWVkZW4gc2VyIHByaXZhZGFzIG8KICBwcm90ZWdpZGFzLgoKPiBFcyBjb23Dum4gdXNhciBsYSBsZXRyYSAnSScgbWF5w7pzY3VsYSBhbCBpbmljaW8gZGVsIG5vbWJyZSBkZSBsYQo+IGludGVyZmF6LgoKPiBQdWVkZW4gY29udGVuZXIgcHJvcGllZGFkZXMsIG3DqXRvZG9zLCBldGMsIHBlcm8gbm8gcHVlZGVuIGNvbnRlbmVyCj4gY2FtcG9zICh2YXJpYWJsZXMpLgoKLSBDdWFuZG8gdW5hIGNsYXNlIGltcGxlbWVudGEgdW5hIGludGVyZmF6LCBkZWJlIGltcGxlbWVudGFyIG8gZGVmaW5pcgogIHRvZG9zIHN1cyBtw6l0b2Rvcy4KICAtIEVsIHRlcm1pbm8gIkltcGxlbWVudGFyIHVuYSBpbnRlcmZheiIsIGVzIHVzYWRvIHBhcmEgZGVzY3JpYmlyIGVsCiAgICBwcm9jZXNvIGRlLCBjcmVhciB1bmEgY2xhc2UgYmFzYWRhIGVuIHVuYSBpbnRlcmZhei4KLSBMYSBpbnRlcmZheiBkZXNjcmliZSBzb2xhbWVudGUgcXVlIGVzIGxvIHF1ZSBkZWJlIGRlIGhhY2VyIHVuYSBjbGFzZS4KICAtIExhIGNsYXNlIGltcGxlbWVudGFuZG8gbGEgaW50ZXJmYXogZGViZSBkZWZpbmlyIGNvbW8gY3VtcGxpciBlc29zCiAgICBjb21wb3J0YW1pZW50b3MuCi0gTGEgc2ludGF4aXMgcGFyYSBpbXBsZW1lbnRhciB1bmEgaW50ZXJmYXogZXMgbGEgbWlzbWEgcXVlIHBhcmEgZGVyaXZhcgogIHVuYSBjbGFzZS4KCmBgYCBjc2hhcnAKcHVibGljIGludGVyZmFjZSBJU2hhcGUgewogICAgdm9pZCBEcmF3KCk7Cn0KCmNsYXNzIENpcmNsZSA6IElTaGFwZSB7CiAgICBwdWJsaWMgdm9pZCBEcmF3KCkgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJDaXJjbGUgRHJhdyIpOwogICAgfQp9CgpzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpIHsKICAgIElTaGFwZSBjID0gbmV3IENpcmNsZSgpOwogICAgYy5EcmF3KCk7Cn0KYGBgCgo+IExhIHBhbGFicmEgYG92ZXJyaWRlYCBubyBlcyBuZWNlc2FyaWEgY3VhbmRvIGltcGxlbWVudGFzIHVuYSBpbnRlcmZhei4KCi0gwr9Qb3JxdWUgdXNhciBpbnRlcmZhY2VzIGVuIGx1Z2FyIGRlIGNsYXNlcyBhYnN0cmFjdGFzPwogIC0gVW5hIGNsYXNlIHB1ZWRlIGhlcmVkYXIgZGUgdW5hIHNvbGEgY2xhc2UgYmFzZSwgcGVybyBwdWVkZQogICAgaW1wbGVtZW50YXIgbXVjaGFzIGludGVyZmFjZXMuCi0gVXNhbmRvIGludGVyZmFjZXMgcHVlZGVzIGluY2x1aXIgY29tcG9ydGFtaWVudG9zIGRlIGRpc3RpbnRhcyBjbGFzZXMKICBlbiB1bmEgY2xhc2UuCiAgLSBQYXJhIGltcGxlbWVudGFyIG11Y2hhcyBpbnRlcmZhY2VzIGVzdGFzIHNlIHNlcGFyYW4gdXNhbmRvIGNvbWFzCiAgICBjdWFuZG8gY3JlYXMgbGEgY2xhc2UuCiAgICAtIGBjbGFzcyBBIDogSVNoYXBlLCBJQW5pbWFsLCBldGMuLi5gCgojIyMgSW1wbGVtZW50YWNpw7NuIHBvciBkZWZlY3RvCgotIExhIGltcGxlbWVudGFjacOzbiBwb3IgZGVmZWN0byBlbiB1bmEgaW50ZXJmYXogbm9zIHBlcm1pdGUgZXNjcmliaXIgdW5hCiAgaW1wbGVtZW50YWNpw7NuIGRlIGN1YWxxdWllciBtw6l0b2RvLgotIEVzdG8gZXMgw7p0aWwgY3VhbmRvIG5lY2VzaXRhbW9zIHByb3ZlZXIgdW5hIHNvbGEgaW1wbGVtZW50YWNpw7NuIHBhcmEKICB1biBmdW5jaW9uYW1pZW50byBjb23Dum4uCgpEaWdhbW9zIHF1ZSBxdWVyZW1vcyBhw7FhZGlyIHVuYSBudWV2YSBmdW5jaW9uYWxpZGFkIGNvbcO6biBhIHVuYSBpbnRlcmZhegp5YSBleGlzdGVudGUsIGxhIGN1YWwgZXMgaW1wbGVtZW50YWRhIHBvciBtdWNoYXMgY2xhc2VzLgoKU2luIGxhIGltcGxlbWVudGFjacOzbiBwb3IgZGVmZWN0byAoYW50ZXMgZGUgQyMgOCksIGVzdGEgb3BlcmFjacOzbgpwcm92b2NhcsOtYSBlcnJvcmVzLCBwb3JxdWUgZWwgbcOpdG9kbyBxdWUgYWdyZWdhbW9zIG5vIGVzdGEgaW1wbGVtZW50YWRvCmVuIGxhIGNsYXNlLCBsYSBpbXBsZW1lbnRhY2nDs24gcG9yIGRlZmVjdG8gcmVzdWVsdmUgZXN0ZSBwcm9ibGVtYS4KCmBgYCBjc2hhcnAKcHVibGljIGludGVyZmFjZSBJU2hhcGUgewogICAgdm9pZCBEcmF3KCk7CiAgICB2b2lkIEZpbmlzaCgpIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiRG9uZSEiKTsKICAgIH0KfQpjbGFzcyBDaXJjbGUgOiBJU2hhcGUgewogICAgcHVibGljIHZvaWQgRHJhdygpIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiQ2lyY2xlIERyYXciKTsKICAgIH0KfQpzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpCnsKICAgIElTaGFwZSBjID0gbmV3IENpcmNsZSgpOwogICAgYy5EcmF3KCk7IC8vIENpcmNsZSBEcmF3CiAgICBjLkZpbmlzaCgpOyAvLyBEb25lIQp9CmBgYAoKLSBBZ3JlZ2Ftb3MgZWwgbcOpdG9kbyBgRmluaXNoKClgIGNvbiBsYSBpbXBsZW1lbnRhY2nDs24gcG9yIGRlZmVjdG8gZW4KICBudWVzdHJhIGludGVyZmF6LCB5IGxhIGxsYW1hbW9zIHNpbiBpbXBsZW1lbnRhcmxhIGVuIGxhIGNsYXNlCiAgYENpcmNsZWAuCgo+IE3DqXRvZG9zIGNvbiBsYSBpbXBsZW1lbnRhY2nDs24gcG9yIGRlZmVjdG8gcHVlZGVuIHNlciBzb2JyZSBlc2NyaXRvcwo+IGxpYnJlbWVudGUgZGVudHJvIGRlIGxhIGNsYXNlIHF1ZSBpbXBsZW1lbnRhIGVzYSBpbnRlcmZhei4KCiMjIENsYXNlcyBhbmlkYWRhcwoKLSBDIyBzb3BvcnRhIGNsYXNlcyBhbmlkYWRhcy4KICAtIFVuYSBjbGFzZSBxdWUgZXMgbWllbWJybyBkZSBvdHJhIGNsYXNlLgoKYGBgIGNzaGFycApjbGFzcyBDYXIgewogICAgc3RyaW5nIG5hbWU7CiAgICBwdWJsaWMgQ2FyKHN0cmluZyBubSkgewogICAgICAgIG5hbWUgPSBubTsKICAgICAgICBNb3RvciBtID0gbmV3IE1vdG9yKCk7CiAgICB9CiAgICBwdWJsaWMgY2xhc3MgTW90b3IgewogICAgICAgIC8vIHNvbWUgY29kZQogICAgfQp9CmBgYAoKLSBMYSBjbGFzZSBgTW90b3JgIGVzdGEgZGVudHJvIGRlIGxhIGNsYXNlIGBDYXJgIHkgcHVlZGUgc2VyIHVzYWRhIGRlIGxhCiAgbWlzbWEgbWFuZXJhIGEgb3Ryb3MgbWllbWJyb3MgZGUgbGEgY2xhc2UuCgojIyBgbmFtZXNwYWNlc2AKCkN1YW5kbyBjcmVhcyB1biBwcm95ZWN0bywgdGllbmUgdW5hIGVzdHJ1Y3R1cmEgcGFyZWNpZGEgYSBsYSBzaWd1aWVudGUuCgpgYGAgY3NoYXJwCnVzaW5nIFN5c3RlbTsKdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIFN5c3RlbS5MaW5xOwp1c2luZyBTeXN0ZW0uVGV4dDsKdXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsKCm5hbWVzcGFjZSBMZWFybiB7CiAgICBjbGFzcyBQcm9ncmFtIHsKICAgICAgICBzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpIHsKCiAgICAgICAgfQogICAgfQp9CmBgYAoKLSBUb2RvIGVsIFByb2dyYW1hIGVzdGEgZGVudHJvIGRlIHVuIGBuYW1lc3BhY2VgCiAgLSBEZWNsYXJhbiB1biDDoW1iaXRvIChzY29wZSkgcXVlIGNvbnRpZW5lIHVuIGNvbmp1bnRvIGRlIG9iamV0b3MKICAgIHJlbGFjaW9uYWRvcy4KICAtIFNlIHB1ZWRlbiB1c2FyIHBhcmEgb3JnYW5pemFyIGVsZW1lbnRvcyBkZSBjw7NkaWdvLgogICAgLSBQdWVkZXMgZGVmaW5pciB0dXMgcHJvcGlvcyBgbmFtZXNwYWNlc2AgeSB1c2FybG9zIGVuIHR1IHByb2dyYW1hLgotIExhIHBhbGFicmEgYHVzaW5nYCBkZWNsYXJhIHF1ZSBlbCBwcm9ncmFtYSBlc3RhIHVzYW5kbyB1biBgbmFtZXNwYWNlYC4KCmBgYCBjc2hhcnAKdXNpbmcgU3lzdGVtOwovLyAuLi4KQ29uc29sZS5Xcml0ZUxpbmUoIkhpIik7CmBgYAoKPiBFbCBgbmFtZXNwYWNlYCBgU3lzdGVtYCBlcyBkb25kZSBsYSBjbGFzZSBgQ29uc29sZWAgZXN0YSBkZWNsYXJhZGEuCgpTaSBubyB1c2Ftb3MgYHVzaW5nYCB0ZW5lbW9zIHF1ZSBlc3BlY2lmaWNhciBlbCBgbmFtZXNwYWNlYC4KCmBgYCBjc2hhcnAKU3lzdGVtLkNvbnNvbGUuV3JpdGVMaW5lKCJIaSIpOwpgYGAKCj4gRWwgLk5FVCBGcmFtZXdvcmsgdXNhIGBuYW1lc3BhY2VzYCBwYXJhIG9yZ2FuaXphciBzdXMgY2xhc2VzLCBzaWVuZG8KPiBgU3lzdGVtYCB1biBlamVtcGxvIGRlIGVzdG8uCgo+IERlY2xhcmFyIHR1cyBwcm9waW9zIGBuYW1lc3BhY2VzYCBwdWVkZSBheXVkYXIgYSBhZ3J1cGFyIHR1cyBjbGFzZXMgeQo+IG3DqXRvZG9zIGVuIHByb3llY3RvcyBncmFuZGVzLgoKIyBgU3RydWN0c2AsIGBFbnVtc2AsIEV4Y2VwY2lvbmVzICYgQXJjaGl2b3MKCiMjIGBTdHJ1Y3RzYAoKLSBFcyB1biB0aXBvIGRlIHZhbG9yIHF1ZSBlcyB1c2FkbyB0w61waWNhbWVudGUgcGFyYSBlbmNhcHN1bGFyIHBlcXVlw7FvcwogIGdydXBvcyBkZSB2YXJpYWJsZXMgcmVsYWNpb25hZGFzLgoKYGBgIGNzaGFycApzdHJ1Y3QgYm9vayB7CiAgICBwdWJsaWMgc3RyaW5nIHRpdGxlOwogICAgcHVibGljIGRvdWJsZSBwcmljZTsKICAgIHB1YmxpYyBzdHJpbmcgYXV0aG9yOwp9CmBgYAoKLSBDb21wYXJ0ZW4gbGEgbWF5b3LDrWEgZGUgbGFzIHNpbnRheGlzIGNvbiBsYXMgY2xhc2VzLCBwZXJvIGVzdMOhbiBtw6FzCiAgbGltaXRhZGFzIHF1ZSBlc3Rhcy4KLSBMb3MgYHN0cnVjdHNgIHB1ZWRlbiBzZXIgaW5zdGFuY2lhZG9zIHNpbiB1c2FyIGVsIG9wZXJhZG9yIGBuZXdgLgoKYGBgIGNzaGFycApzdGF0aWMgdm9pZCBtYWluKHN0cmluZ1tdIGFyZ3MpIHsKICAgIEJvb2sgYjsKICAgIGIudGl0bGUgPSAiVGVzdCI7CiAgICBiLnByaWNlID0gNS45OTsKICAgIGIuYXV0aG9yID0gIkRhdmlkIjsKCiAgICBDb25zb2xlLldyaXRlTGluZShiLnRpdGxlKTsKfQpgYGAKCj4gTm8gc29wb3J0YW4gaGVyZW5jaWEgeSBubyBwdWVkZW4gY29udGVuZXIgbcOpdG9kb3MgdmlydHVhbGVzLgoKLSBgc3RydWN0c2AgcHVlZGVuIGNvbnRlbmVyOgogIC0gTcOpdG9kb3MuCiAgLSBQcm9waWVkYWRlcy4KICAtIEluZGV4YWRvcmVzLgogIC0gRXRjLgotIE5vIHB1ZWRlbiBjb250ZW5lciBjb25zdHJ1Y3RvcmVzIHBvciBkZWZlY3RvIChDb25zdHJ1Y3RvcmVzIHNpbgogIHBhcsOhbWV0cm9zKS4KICAtIFBlcm8gcHVlZGVuIGNvbnRlbmVyIGNvbnN0cnVjdG9yZXMgcXVlIHRvbWFuIHBhcsOhbWV0cm9zLgogICAgLSBTaSBsb3MgdXNhbiwgbGEgcGFsYWJyYSBgbmV3YCBlcyBuZWNlc2FyaWEgcGFyYSBpbnN0YW5jaWFybG9zIGRlCiAgICAgIG1hbmVyYSBzaW1pbGFyIGEgdW5hIGNsYXNlLgoKYGBgIGNzaGFycApzdHJ1Y3QgUG9pbnQgewogICAgcHVibGljIGludCB4OwogICAgcHVibGljIGludCB5OwogICAgcHVibGljIFBvaW50KGludCB4LCBpbnQgeSkgewogICAgICAgIHRoaXMueCA9IHg7CiAgICAgICAgdGhpcy55ID0geTsKICAgIH0KfQpwdWJsaWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpIHsKICAgIFBvaW50IHAgPSBuZXcgUG9pbnQoMTAsIDE1KTsKICAgIENvbnNvbGUuV3JpdGVMaW5lKHAueCk7Cn0KYGBgCgojIyMgYFN0cnVjdHNgIHZzIENsYXNlcwoKLSBMYXMgY2xhc2VzIHNvbiB1c2FkYXMgcGFyYSBtb2RlbGFyIGNvbXBvcnRhbWllbnRvcyBtw6FzIGNvbXBsZWpvcyBvCiAgZGF0b3MgcXVlIGVzdMOhbiBkZXN0aW5hZG9zIGEgc2VyIG1vZGlmaWNhZG9zIGRlc3B1w6lzIGRlIHF1ZSBzZSBjcmVhIGVsCiAgb2JqZXRvLgoKLSBMb3MgYHN0cnVjdHNgIHNvbiBtZWpvcmVzIHBhcmEgZXN0cnVjdHVyYXMgZGUgZGF0b3MgcGVxdWXDsWFzIHF1ZQogIGNvbnRpZW5lbiBkYXRvcyBxdWUgbm8gZXN0w6FuIGRlc3RpbmFkb3MgYSBjYW1iaWFyIGRlc3B1w6lzIGRlIGNyZWFyc2UuCgogID4gVG9kb3MgbG9zIHRpcG9zIGRlIGRhdG9zIHBvciBkZWZlY3RvIGVuIEMjIHNvbiBgc3RydWN0c2AgKGludCwKICA+IGRvdWJsZSwgYm9vbCwgY2hhciwgZXRjKS4KCiMjIGBFbnVtc2AKCi0gTGEgcGFsYWJyYSBgZW51bWAgZXMgdXNhZGEgcGFyYSBkZWNsYXJhciB1bmEgZW51bWVyYWNpw7NuLgogIC0gVW4gdGlwbyBxdWUgY29uc2lzdGUgZGUgdW4gY29uanVudG8gZGUgY29uc3RhbnRlcyBsbGFtYWRhcyBsYSBsaXN0YQogICAgZGVsIGVudW1lcmFkb3IuCgpgYGAgY3NoYXJwCmVudW0gRGF5cyB7U3VuLCBNb24sIFR1ZSwgV2VkLCBUaHUsIEZyaSwgU2F0fTsKYGBgCgpQdWVkZXMgdGFtYmnDqW4gYXNpZ25hciB0dXMgcHJvcGlvcyB2YWxvcmVzIGFsIGBlbnVtYC4KCmBgYCBjc2hhcnAKZW51bSBEYXlzIHtTdW4sIE1vbiwgVHVlPTQsIFdlZCwgVGh1LCBGcmksIFNhdH07CmBgYAoKLSBFbiBlbCBlamVtcGxvIGRlIGFycmliYSwgbGEgZW51bWVyYWNpw7NuIGVtcGllemEgZGVzZGUgMCwgc2llbmRvIDEgTW9uLAogIHkgVHVlIDQgV2VkIDUgeSBhc2ksIHJlc3BldGFuZG8gbG9zIHZhbG9yZXMgZGFkb3MuCi0gUG9kZW1vcyBhY2NlZGVyIGEgbG9zIGVsZW1lbnRvcyBkZSB1biBgZW51bWAgY29uIGxhIHNpbnRheGlzIGRlIHB1bnRvLgotIFBhcmEgYXNpZ25hciBsb3MgdmFsb3JlcyBkZSB1biBlbnVtIGEgdmFyaWFibGVzIG5lY2VzaXRhbW9zCiAgZXNwZWNpZmljYXIgZWwgdGlwbyBlbnRyZSBwYXLDqW50ZXNpcy4KCmBgYCBjc2hhcnAKZW51bSBEYXlzIHtTdW4sIE1vbiwgVHVlLCBXZWQsIFRodSwgRnJpLCBTYXR9OwoKc3RhdGljIHZvaWQgTWFpbihzdHJpbmdbXSBhcmdzKSB7CiAgICBpbnQgeCA9IChpbnQpRGF5cy5UdWU7CiAgICBDb25zb2xlLldyaXRlTGluZSh4KTsKfQpgYGAKCj4gYGVudW1zYCBkZWZpbmVuIHZhcmlhYmxlcyBxdWUgcGVydGVuZWNlbiBhIHVuIGNvbmp1bnRvIGZpam8sIGNvbW8gbG8KPiBwdWVkZW4gc2VyIGxvcyBtZXNlcyBkZWwgYcOxbyBvIGxvcyBkw61hcyBkZSBsYSBzZW1hbmEuCgpFc3RvcyBzb24gdXNhZG9zIGVuIGNvbmp1bnRvIGNvbiBgc3dpdGNoYAoKYGBgIGNzaGFycAplbnVtIFRyYWZmaWNMaWdodHMgeyBHcmVlbiwgUmVkLCBZZWxsb3cgfTsKCnN0YXRpYyB2b2lkIE1haW4oc3RyaW5nW10gYXJncykgewogICAgVHJhZmZpY0xpZ2h0cyB4ID0gVHJhZmZpY0xpZ2h0cy5SZWQ7CiAgICBzd2l0Y2ggKHgpIHsKICAgICAgICBjYXNlIFRyYWZmaWNMaWdodHMuR3JlZW46CiAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJHbyEiKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBUcmFmZmljTGlnaHRzLlJlZDoKICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIlN0b3AhIik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgVHJhZmZpY0xpZ2h0cy5ZZWxsb3c6CiAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJHbyBmYXN0ZXIhIik7CiAgICAgICAgICAgIGJyZWFrOwogICAgfQp9CmBgYAoKIyMgTWFuZWpvIGRlIGV4Y2VwY2lvbmVzCgotIFVuYSBleGNlcGNpw7NuIGVzIHVuIHByb2JsZW1hIHF1ZSBvY3VycmUgZHVyYW50ZSBsYSBlamVjdWNpw7NuIGRlIHVuCiAgcHJvZ3JhbWEuCiAgLSBFc3RhcyBjYXVzYW4gcXVlIGVsIHByb2dyYW1hIHRlcm1pbmUgZGUgbWFuZXJhIGFub3JtYWwuCi0gRXN0YXMgcHVlZGVuIHN1Y2VkZXIgcG9yIG11Y2hhcyByYXpvbmVzLCBkZXNkZSBkYXRvcyBpbnbDoWxpZG9zIGhhc3RhCiAgZmFsbGFzIGRlIGzDs2dpY2EuCgpgYGAgY3NoYXJwCmludFtdIGFyciA9IG5ldyBpbnRbXSB7NCwgNiwgOH07CkNvbnNvbGUuV3JpdGVMaW5lKGFycls4XSk7CmBgYAoKPiBFc3RlIGPDs2RpZ28gY2F1c2FyYSB1bmEgZXhjZXBjacOzbiBwb3JxdWUgZXN0YW1vcyBpbnRlbnRhbmRvIGFjY2VkZXIgYQo+IHVuIHZhbG9yIHF1ZSBubyBleGlzdGUuCgotIEMjIG5vcyBwcm92ZWUgdW5hIG1hbmVyYSBkZSBtYW5lamFyIGVzdGFzIGV4Y2VwY2lvbmVzIGNvbiB1bgogIGB0cnktY2F0Y2hgLgoKYGBgIGNzaGFycAp0cnkgewogICAgaW50W10gYXJyID0gbmV3IGludFtdIHs0LCA2LCA4fTsKICAgIENvbnNvbGUuV3JpdGVMaW5lKGFycls4XSk7Cn0KY2F0Y2goRXhlcHRpb24gZSkgewogICAgQ29uc29sZS5Xcml0ZWxpbmUoIlVuIGVycm9yIGhhIG9jdXJyaWRvLiIpCn0KYGBgCgotIEVsIGPDs2RpZ28gcXVlIHB1ZWRlIGRldG9uYXIgdW5hIGV4Y2VwY2nDs24gc2UgcG9uZSBkZW50cm8gZGVsIGJsb3F1ZQogIGB0cnlgLgogIC0gU2kgdW5hIGV4Y2VwY2nDs24gb2N1cnJlLCBzZSBlamVjdXRhIGVsIGJsb3F1ZSBgY2F0Y2hgIHNpbiBxdWUgZWwKICAgIHByb2dyYW1hIHBhcmUgZGUgbWFuZXJhIGFicnVwdGEuCi0gRGVudHJvIGRlbCBibG9xdWUgYGNhdGNoYCBlbnRyZSBwYXLDqW50ZXNpcyBzZSBwb25lIGVsIHRpcG8gZGUKICBleGNlcGNpw7NuIHF1ZSBxdWVyZW1vcyBtYW5lamFyLCBwZXJvIHBvZGVtb3MgdXNhciBsYSBwYWxhYnJhCiAgYEV4Y2VwdGlvbmAgcGFyYSBtYW5lamFyIGN1YWxxdWllciBleGNlcGNpw7NuLgotIExhIGV4Y2VwY2nDs24KCmBgYCBjc2hhcnAKdHJ5IHsKICAgIGludFtdIGFyciA9IG5ldyBpbnRbXSB7NCwgNiwgOH07CiAgICBDb25zb2xlLldyaXRlTGluZShhcnJbOF0pOwp9CmNhdGNoKEV4Y2VwdGlvbiBlKSB7CiAgICBDb25zb2xlLldyaXRlbGluZShlLk1lc3NhZ2UpOwp9CmBgYAoKIyMjIE1hbmVqYW5kbyBkaWZlcmVudGVzIGV4Y2VwY2lvbmVzCgotIFBvZGVtb3MgaW5jbHVpciBkaWZlcmVudGVzIGJsb3F1ZXMgYGNhdGNoYCBwYXJhIGNhZGEgYHRyeWAgcGFyYSB0ZW5lcgogIGNvbXBvcnRhbWllbnRvcyBwZXJzb25hbGl6YWRvcyBwYXJhIGNhZGEgZXhjZXBjacOzbi4KCmBgYCBjc2hhcnAKaW50IHgsIHk7CnRyeSB7CiAgICB4ID0gQ29udmVydC5Ub0ludDMyKENvbnNvbGUuUmVhZCgpKTsKICAgIHkgPSBDb252ZXJ0LlRvSW50MzIoQ29uc29sZS5SZWFkKCkpOwogICAgQ29uc29sZS5Xcml0ZUxpbmUoeCAvIHkpOwp9CmNhdGNoIChEaXZpZGVCeVplcm9FeGNlcHRpb24gZSkgewogICAgQ29uc29sZS5Xcml0ZUxpbmUoIkNhbm5vdCBkaXZpZGUgYnkgMCIpOwp9CmNhdGNoKEV4Y2VwdGlvbiBlKSB7CiAgICBDb25zb2xlLldyaXRlTGluZSgiQW4gZXJyb3Igb2NjdXJyZWQiKTsKfQpgYGAKCj4gTGFzIGV4Y2VwY2lvbmVzIHNvbiBtdXkgw7p0aWxlcyBjdWFuZG8gbWFuZWphbW9zIGlucHV0IGRlbCB1c3VhcmlvIHBhcmEKPiB2YWxpZGFyIGxhIGluZm9ybWFjacOzbiBxdWUgZXMgZGFkYSBhbCBwcm9ncmFtYS4KCiMjIyBgRmluYWxseWAKCi0gYGZpbmFsbHlgIGVzIHVuIGJsb3F1ZSBxdWUgcG9uZSBhbCBmaW5hbCBkZSBsb3MgYmxvcXVlcyBgY2F0Y2hgIHkKICBzaWVtcHJlIHNlIGVqZWN1dGEsIHNpbiBpbXBvcnRhciBzaSB1bmEgZXhjZXBjacOzbiBvY3VycmUgbyBuby4KLSBFcyDDunRpbCBwYXJhIGNlcnJhciBhcmNoaXZvcyBvIGNvbmV4aW9uZXMsIHlhIHF1ZSBzaWVtcHJlIHNlIHRpZW5lbgogIHF1ZSBjZXJyYXIgc2luIGltcG9ydGFyIHNpIHVuIGVycm9yIG9jdXJyZSBvIG5vLgoKYGBgIGNzaGFycAppbnQgcmVzdWx0PTA7CmludCBudW0xID0gODsKaW50IG51bTIgPSA0Owp0cnkgewogICAgcmVzdWx0ID0gbnVtMSAvIG51bTI7Cn0KY2F0Y2ggKERpdmlkZUJ5WmVyb0V4Y2VwdGlvbiBlKSB7CiAgICBDb25zb2xlLldyaXRlTGluZSgiRXJyb3IiKTsKfQpmaW5hbGx5IHsKICAgIENvbnNvbGUuV3JpdGVMaW5lKHJlc3VsdCk7Cn0KYGBgCgojIyBUcmFiYWphbmRvIGNvbiBhcmNoaXZvcwoKLSBFbCBgbmFtZXNwYWNlYCBgU3lzdGVtLklPYCB0aWVuZSB2YXJpYXMgY2xhc2VzIHBhcmEgdHJhYmFqYXIgY29uCiAgYXJjaGl2b3MuCi0gTGEgY2xhc2UgYEZpbGVgIGVzIHVuYSBkZSBlbGxvcy4KCmBgYCBjc2hhcnAKc3RyaW5nIHN0ciA9ICJTb21lIHRleHQiOwpGaWxlLldyaXRlQWxsVGV4dCgidGVzdC50eHQiLCBzdHIpOwpgYGAKCi0gRWwgbcOpdG9kbyBgV3JpdGVBbGxUZXh0YCBjcmVhIHVuIGFyY2hpdm8gZW4gbGEgcnV0YSBlc3BlY2lmaWNhZGEgeQogIGVzY3JpYmUgc3UgY29udGVuaWRvIGVuIGVsLgogIC0gU2kgZWwgYXJjaGl2byBleGlzdGUgbG8gc29icmUgZXNjcmliZS4KLSBQb2RlbW9zIExlZXIgZWwgY29udGVuaWRvIGRlIHVuIGFyY2hpdm8gdXNhbmRvIGBSZWFkQWxsVGV4dGAuCgpgYGAgY3NoYXJwCnN0cmluZyB0ZXh0ID0gRmlsZS5SZWFkQWxsVGV4dCgidGVzdC50eHQiKTsKQ29uc29sZS5Xcml0ZUxpbmUodGV4dCk7CmBgYAoKLSBMYSBjbGFzZSBGaWxlIHRpZW5lIHRhbWJpw6luIG90cm9zIG3DqXRvZG9zLgogIC0gYEFwcGVuZEFsbFRleHQoKWAKICAtIGBDcmVhdGUoKWAKICAtIGBEZWxldGUoKWAKICAtIGBFeGlzdHMoKWAKICAtIGBDb3B5KClgCiAgLSBgTW92ZSgpYAotIFRvZG9zIGVzdG9zIG3DqXRvZG9zIGNpZXJyYW4gZWwgYXJjaGl2byBjdWFuZG8gdGVybWluYW4gZGUgZWplY3V0YXJzZS4KCiMgR2Vuw6lyaWNvcwoKIyMgR2Vuw6lyaWNvcwoKLSBMb3MgZ2Vuw6lyaWNvcyBub3MgcGVybWl0ZW4gcmVodXNhciBjw7NkaWdvIGNvbiBkaWZlcmVudGVzIHRpcG9zLgoKYGBgIGNzaGFycApzdGF0aWMgdm9pZCBTd2FwKHJlZiBpbnQgYSwgcmVmIGludCBiKSB7CiAgICBpbnQgdGVtcCA9IGE7CiAgICBhID0gYjsKICAgIGIgPSB0ZW1wOwp9CmBgYAoKPiBFbiBlbCBjw7NkaWdvIGRlIGFycmliYSB0ZW5lbW9zIHVuIG3DqXRvZG8gcXVlIGNhbWJpYSBkZSBsdWdhciBkb3MKPiB2YWxvcmVzLgoKRXN0ZSBjw7NkaWdvIHNvbG8gZnVuY2lvbmEgY29uIGVudGVyb3MsIHNpIHF1ZXJlbW9zIHVzYXJsbyBjb24gb3Ryb3MKdGlwb3MgZGViZXJlbW9zIHNvYnJlY2FyZ2FybG8gY29uIHRvZG9zIGxvcyB0aXBvcyBxdWUgcXVlcnJlbW9zIHVzYXJsby4KCi0gQ29uIGxvcyBnZW7DqXJpY29zIHBvZGVtb3MgZGVmaW5pciB1biB0aXBvIGRlIGRhdG8gZ2Vuw6lyaWNvLgoKYGBgIGNzaGFycApzdGF0aWMgdm9pZCBTd2FwPFQ+KHJlZiBUIGEsIHJlZiBUIGIpIHsKICAgIFQgdGVtcCA9IGE7CiAgICBhID0gYjsKICAgIGIgPSB0ZW1wOwp9CmBgYAoKPiBgVGAgZXMgZWwgbm9tYnJlIGRlIG51ZXN0cm8gdGlwbyBnZW7DqXJpY28geSBzZSBkZWZpbmUgY29uIGA8VD5gLgoKIyMgTcOpdG9kb3MgR2Vuw6lyaWNvcwoKLSBBaG9yYSBwb2RlbW9zIGRlZmluaXIgbnVlc3RybyBtw6l0b2RvIGBTd2FwYCBjb24gZGlmZXJlbnRlcyB0aXBvcyBkZQogIGRhdG9zLgotIEN1YW5kbyBsbGFtZW1vcyBhIHVuIG3DqXRvZG8gZ2Vuw6lyaWNvIGRlYmVtb3MgZGUgZXNwZWNpZmljYXIgZWwgdGlwbyBkZQogIGRhdG8gY29uIGVsIHF1ZSB2YW1vcyBhIHRyYWJhamFyLgoKYGBgIGNzaGFycApzdGF0aWMgdm9pZCBTd2FwPFQ+KHJlZiBUIGEsIHJlZiBUIGIpIHsKICAgIFQgdGVtcCA9IGE7CiAgICBhID0gYjsKICAgIGIgPSB0ZW1wOwp9CnN0YXRpYyB2b2lkIE1haW4oc3RyaW5nW10gYXJncykgewogICAgaW50IGEgPSA0LCBiID0gOTsKICAgIFN3YXA8aW50PihyZWYgYSwgcmVmIGIpOwogICAgQ29uc29sZS5Xcml0ZUxpbmUoYSsiICIrYik7CgogICAgc3RyaW5nIHggPSAiSGVsbG8iOwogICAgc3RyaW5nIHkgPSAiV29ybGQiOwogICAgU3dhcDxzdHJpbmc+KHJlZiB4LCByZWYgeSk7CiAgICBDb25zb2xlLldyaXRlTGluZSh4KyIgIit5KTsKfQpgYGAKCj4gUG9kZW1vcyB0ZW5lciBtw7psdGlwbGVzIHBhcsOhbWV0cm9zIGRlIGRpZmVyZW50ZSB0aXBvIGVuIHVuIG3DqXRvZG8KPiBnZW7DqXJpY28gdXNhbmRvIGA8VCxVPmAuCgojIyBDbGFzZXMgZ2Vuw6lyaWNhcwoKLSBMb3MgdGlwb3MgZ2Vuw6lyaWNvcyB0YW1iacOpbiBwdWVkZW4gc2VyIHVzYWRvcyBjb24gY2xhc2VzLgotIEVsIHVzbyBtw6FzIGNvbcO6biBwYXJhIGNsYXNlcyBnZW7DqXJpY2FzIGVzIGNvbiBjb2xlY2Npb25lcyBkZQogIGVsZW1lbnRvcy4KICAtIEVuIGVzdG9zIGxhcyBvcGVyYWNpb25lcyBiw6FzaWNhcyBjb21vIHN1bWEgbyByZXN0YSBzZSBoYWNlbiBzaW4KICAgIGltcG9ydGFyIHF1ZSB0aXBvIGRlIGVsZW1lbnRvIHNlYS4KLSBQb2RlbW9zIGhhY2VyIHVuYSBpbXBsZW1lbnRhY2nDs24gZGUgdW5hIHBpbGEgZ2Vuw6lyaWNhLgoKYGBgIGNzaGFycApjbGFzcyBTdGFjazxUPiB7CiAgICBpbnQgaW5kZXg9MDsKICAgIFRbXSBpbm5lckFycmF5ID0gbmV3IFRbMTAwXTsKCiAgICBwdWJsaWMgdm9pZCBQdXNoKFQgaXRlbSkgewogICAgICAgIGlubmVyQXJyYXlbaW5kZXgrK10gPSBpdGVtOwogICAgfQoKICAgIHB1YmxpYyBUIFBvcCgpIHsKICAgICAgICByZXR1cm4gaW5uZXJBcnJheVstLWluZGV4XTsKICAgIH0KCiAgICBwdWJsaWMgVCBHZXQoaW50IGspIHsgcmV0dXJuIGlubmVyQXJyYXlba107IH0KfQpgYGAKCi0gTnVlc3RyYSBpbXBsZW1lbnRhY2nDs24gZGUgdW5hIHBpbGEgZ2Vuw6lyaWNhIGd1YXJkYSBlbGVtZW50b3MgZGUKICBjdWFscXVpZXIgdGlwby4KLSBBc8OtIHF1ZSBwb2RlbW9zIGNyZWFyIG9iamV0b3MgZGUgbnVlc3RyYSBjbGFzZSBnZW7DqXJpY2EuCgpgYGAgY3NoYXJwClN0YWNrPGludD4gaW50U3RhY2sgPSBuZXcgU3RhY2s8aW50PigpOwpTdGFjazxzdHJpbmc+IHN0clN0YWNrID0gbmV3IFN0YWNrPHN0cmluZz4oKTsKU3RhY2s8UGVyc29uPiBQZXJzb25TdGFjayA9IG5ldyBTdGFjazxQZXJzb24+KCk7CmBgYAoKIyMgQ29sZWNjaW9uZXMKCi0gU29uIHVzYWRhcyBwYXJhIGFncnVwYXIgb2JqZXRvcyByZWxhY2lvbmFkb3MgZW50cmUgc2kuCi0gQSBkaWZlcmVuY2lhIGRlIHVuIGFycmVnbG8sIGVzdG9zIHNvbiBkaW7DoW1pY29zLgotIFTDrXBpY2FtZW50ZSBpbmNsdXllbiBtw6l0b2RvcyBwYXJhIGFncmVnYXIsIHJlbW92ZXIgbyBjb250YXIgbG9zCiAgZWxlbWVudG9zIGRlbnRybyBkZSBlbGxhcy4KLSBTZSBwdWVkZSBpdGVyYXIgYSB0cmF2w6lzIGRlIGVsbGFzIGNvbiBgZm9yYCwgYGZvcmVhY2hgLgotIENvbW8gc29uIGNsYXNlcywgZGViZXMgZGUgZGVjbGFyYXIgdW5hIGluc3RhbmNpYSBkZSBlc3RhIGFudGVzIGRlCiAgYcOxYWRpciBlbGVtZW50b3MgYSBlc3RhLgoKYGBgIGNzaGFycApMaXN0PGludD4gbGkgPSBuZXcgTGlzdDxpbnQ+KCk7CmBgYAoKIyMjIENvbGVjY2lvbmVzIGdlbsOpcmljYXMKCi0gU29uIGVsIHRpcG8gZGUgY29sZWNjacOzbiBhIHVzYXIgc2llbXByZSBxdWUgdG9kb3MgbG9zIGVsZW1lbnRvcyBzZWFuCiAgZGVsIG1pc21vIHRpcG8uCi0gRWwgYG5hbWVzcGFjZWAgYFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljYCBpbmNsdXllIGxhcyBzaWd1aWVudGVzCiAgY29sZWNjaW9uZXMgZ2Vuw6lyaWNhcy4KICAtIGBMaXN0PFQ+LmAKICAtIGBEaWN0aW9uYXJ5PFRLZXksVFZhbHVlPi5gCiAgLSBgU29ydGVkTGlzdDxUS2V5LFRWYWx1ZT4uYAogIC0gYFN0YWNrPFQ+LmAKICAtIGBRdWV1ZTxUPi5gCiAgLSBgSGFzaHNldDxUPi5gCgojIyMgQ29sZWNjaW9uZXMgbm8gZ2Vuw6lyaWNhcwoKLSBHdWFyZGFuIGVsZW1lbnRvcyBxdWUgc29uIGRlIHRpcG8gYE9iamVjdGAuCi0gUHVlZGVuIHNlciBtw6FzIGxlbnRhcyBxdWUgbGFzIGdlbsOpcmljYXMuCi0gRWwgYG5hbWVzcGFjZWAgYFN5c3RlbS5Db2xsZWN0aW9uc2AgaW5jbHV5ZSBsYXMgc2lndWllbnRlcyBjb2xlY2Npb25lcwogIG5vIGdlbsOpcmljYXMuCiAgLSBgQXJyYXlMaXN0YAogIC0gYFNvcnRlZExpc3RgCiAgLSBgU3RhY2tgCiAgLSBgUXVldWVgCiAgLSBgSGFzaHRhYmxlYAogIC0gYEJpdEFycmF5YAoKIyMgYExpc3RgIHkgYEJpdEFycmF5YAoKLSBVbmEgbGlzdGEgZXMgc2ltaWxhciBhIHVuIGFycmVnbG8sIHBlcm8gZW4gZXN0YSBsb3MgZWxlbWVudG9zIHB1ZWRlbgogIHNlciBhZ3JlZ2Fkb3MgeSByZW1vdmlkb3MgZGUgbWFuZXJhIGRpbsOhbWljYS4KLSBSZXF1aWVyZSBxdWUgdG9kb3MgbG9zIGVsZW1lbnRvcyBzZWFuIGRlbCBtaXNtbyB0aXBvLgotIEluY2x1eWUgbG9zIHNpZ3VpZW50ZXMgbcOpdG9kb3M6CiAgYENvdW50YCAgCiAgT2J0aWVuZSBlbCBuw7ptZXJvIGRlIGVsZW1lbnRvcyBxdWUgY29udGllbmUgbGEgbGlzdGEuCgogIGBBZGRgICAKICBBw7FhZGUgdW4gZWxlbWVudG8gYWwgZmluYWwgZGUgbGEgbGlzdGEuCgogIGBSZW1vdmVBdChpbnQgaW5kZXgpYCAgCiAgUmVtdWV2ZSB1biBlbGVtZW50byBlbiBlbCDDrW5kaWNlIGRhZG8uCgogIGBTb3J0KClgICAKICBPcmRlbmEgbG9zIGVsZW1lbnRvcyBkZSBsYSBsaXN0YS4KCiAgYENhcGFjaXR5YCAgCiAgT2J0aWVuZSBlbCBuw7ptZXJvIGRlIGVsZW1lbnRvcyBxdWUgbGEgbGlzdGEgcHVlZGUgdGVuZXIgYW50ZXMgZGUKICBjYW1iaWFyIGRlIHRhbWHDsW8uCgogIGBDbGVhcigpYCAgCiAgUmVtdWV2ZSBsb3MgZWxlbWVudG9zIGRlIGxhIGxpc3RhLgoKICBgVHJpbUV4ZXNzKClgICAKICBQb25lIGxhIGNhcGFjaWRhZCBkZSBsYSBsaXN0YSBhIGVsIG7Dum1lcm8gYWN0dWFsIGRlIGVsZW1lbnRvcywgw7p0aWwKICBwYXJhIHJlZHVjaXIgbWVtb3JpYS4KCiAgYEFkZFJhbmdlKElFbnVtZXJhYmxlIGNvbGwpYCAgCiAgQcOxYWRlIGxvcyBlbGVtZW50b3MgZGUgdW5hIGNvbGVjY2nDs24gY29uIGxvcyBlbGVtZW50b3MgZGVsIG1pc21vIHRpcG8KICBkZSBsYSBsaXN0YSBhbCBmaW5hbCBkZSBlc3RhLgoKICBgSW5zZXJ0KGludCBpLCBUIHQpYCAgCiAgSW5zZXJ0YSBlbCBlbGVtZW50byB0IGVuIGVsIMOtbmRpY2UgaS4KCiAgYFJlbW92ZShUIHQpYCAgCiAgUmVtdWV2ZSBsYSBwcmltZXJhIG9jdXJyZW5jaWEgZGUgZWwgZWxlbWVudG8gdCBlbiBsYSBsaXN0YS4KCiAgUmVtb3ZlUmFuZ2UoaW50IGksIGludCBjb3VudCkgIAogIFJlbXVldmUgdW4gcmFuZ28gZGUgZWxlbWVudG9zIGRlIGxhIGxpc3RhLgoKICBgQ29udGFpbnMoVCB0KWAgIAogIFJldG9ybmEgYHRydWVgIHNpIGVsIGVsZW1lbnRvIGVzcGVjaWZpY2FkbyBleGlzdGUgZW4gbGEgbGlzdGEuCgogIGBSZXZlcnNlKClgICAKICBJbnZpZXJ0ZSBlbCBvcmRlbiBkZSBsb3MgZWxlbWVudG9zIGVuIGxhIGxpc3RhLgoKICBgVG9BcnJheSgpYCAgCiAgQ29waWEgbG9zIGVsZW1lbnRvcyBkZSBsYSBsaXN0YSBlbiB1biBudWV2byBhcnJlZ2xvLgoKIyMjIGBTb3J0ZWRMaXN0YAoKLSBFcyB1bmEgY29sZWNjacOzbiBkZSB2YWxvcmVzIHRpcG8gbGxhdmUvdmFsb3IuCiAgLSBTb24gb3JkZW5hZG9zIHBvciBsYSBsbGF2ZS4KICAtIExhIGxsYXZlIHB1ZWRlIHNlciB1c2FkYSBwYXJhIGFjY2VkZXIgYWwgdmFsb3IuCi0gUmVxdWllcmUgcXVlIGxvcyBlbGVtZW50b3MgbGxhdmUvdmFsb3Igc2VhbiBkZWwgbWlzbW8gdGlwby4KLSBMYXMgbGxhdmVzIG5vIHB1ZWRlbiByZXBldGlyc2UuCi0gSW5jbHV5ZSBsb3Mgc2lndWllbnRlcyBtw6l0b2Rvcy4KCiMjIyBgQml0QXJyYXlgCgotIFNvbiB1bmEgY29sZWNjacOzbiBkZSBiaXRzLgogIC0gU3VzIHZhbG9yZXMgcHVlZGVuIHNlciAwIG8gMS4KLSBOb3JtYWxtZW50ZSBzb24gdXNhZG9zIHBhcmEgcmVwcmVzZW50YXIgdW4gZ3J1cG8gZGUgYmFuZGVyYXMKICBib29sZWFuYXMuCi0gQ29udGllbmUgbGFzIHNpZ3VpZW50ZXMgcHJvcGllZGFkZXMgeSBtw6l0b2RvczoKICBgQ291bnRgICAKICBPYnRpZW5lIGVsIG7Dum1lcm8gZGUgYml0cyBlbiBlbCBhcnJlZ2xvLgoKICBgSXNSZWFkT25seWAgIAogIE9idGllbmUgdW4gdmFsb3IgaW5kaWNhbmRvIHNpIGVsIGBCaXRBcnJheWAgZXMgZGUgc29sbyBsZWN0dXJhLgoKICBgU2V0QWxsKGJvb2wgdmFsdWUpYCAgCiAgUG9uZSB0b2RvcyBsb3MgdmFsb3JlcyBkZWwgYXJyZWdsbyBlbiB1biB2YWxvciBlc3BlY2lmaWNvLgoKICBgQW5kKEJpdEFycmF5IGJhKWAgIAogIEFwbGljYSB1biBgYW5kYCBhbCBgQml0QXJyYXlgIGRhZG8gY29uIGVsIHZhbG9yIGBiYWAuCgogIC0gVGFtYmnDqW4gcHVlZGVzIGhhY2VyIGBPciwgWG9yYC4KCiAgYE5vdCgpYCAgCiAgSW52aWVydGUgbG9zIHZhbG9yZXMgZGVsIGBCaXRBcnJheWAuCi0gTG9zIGBCaXRBcnJheWAgcHVlZGVuIHVzYXJzZSBwYXJhIGVsIHByb2Nlc2FtaWVudG8gZGUgaW3DoWdlbmVzLgoKIyMgYFN0YWNrYCB5IGBRdWV1ZWAKCi0gVW5hIHBpbGEgKHN0YWNrKSBlcyB1bmEgbGlzdGEgdGlwbyAqKmxhc3QgaW4sIGZpcnN0IG91dCoqIChMSUZPKS4KLSBJbnNlcnRhciB1biBlbGVtZW50byBhIHVuIHN0YWNrIGVzIGxsYW1hZG8gYHB1c2hpbmdgLgotIFF1aXRhciB1biBlbGVtZW50byBkZWwgc3RhY2sgZXMgbGxhbWFkbyBgcG9wYC4KICAtIEVzdG8gc29sbyBwdWVkZSBoYWNlcnNlIGVuIGxhIHBhcnRlIHN1cGVyaW9yIGRlbCBzdGFjay4KCiMjIGBIYXNoU2V0YAoKLSBFcyB1biBjb25qdW50byBkZSB2YWxvcmVzIMO6bmljb3MuCi0gRXN0b3Mgc29uIGRpZmVyZW50ZXMgYSBvdHJhcyBjb2xlY2Npb25lcyBwb3JxdWUgc29sbyBzb24gdW4gY29uanVudG8KICBkZSB2YWxvcmVzLCBubyB0aWVuZW4gw61uZGljZS4KCj4gTG9zIEhhc2hTZXQgcHJvdmVlbiB1biBhbHRvIHJlbmRpbWllbnRvLCBlbiBsYSBiw7pzcXVlZGEsIGFkaWNpw7NuIHkKPiBlbGltaW5hY2nDs24gZGUgZWxlbWVudG9zLCBwdWVkZSBzZXIgdXNhZGEgcGFyYSBpbXBsZW1lbnRhciBvdHJhcwo+IGVzdHJ1Y3R1cmFzIGRlIGRhdG9zLgo=" checkout-date="2022-12-26T00:14:36.282Z" effective-permissions="eyJjb21tZW50cyI6eyJyZWFkIjpmYWxzZSwid3JpdGUiOmZhbHNlLCJtYW5hZ2UiOmZhbHNlfSwiaGlzdG9yeSI6eyJyZWFkIjp0cnVlfSwic291cmNlIjp7InJlYWQiOnRydWV9LCJwYWdlcyI6eyJyZWFkIjp0cnVlLCJ3cml0ZSI6dHJ1ZSwibWFuYWdlIjp0cnVlLCJkZWxldGUiOnRydWUsInNjcmlwdCI6dHJ1ZSwic3R5bGUiOnRydWV9LCJzeXN0ZW0iOnsibWFuYWdlIjp0cnVlfX0="></editor></div></body></html>